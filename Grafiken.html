<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Lernplattform - 20&nbsp; Grafiken</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Fehlermeldungen.html" rel="next">
<link href="./Fehlende-Werte.html" rel="prev">
<link href="./figures/Logo_Favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Daten-importieren.html">Datenaufbereitung</a></li><li class="breadcrumb-item"><a href="./Grafiken.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Grafiken</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Lernplattform</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/Methods-Berlin/RLernplattform" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">R Lernplattform</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Willkommen auf der R-Lernplattform!</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">R Crash Course</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Quick_Start_Installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Quick Start: Installation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Einfuehrung_in_RStudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_als_Taschenrechner.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">R als Taschenrechner</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Skripte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Skripte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Datentypen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datentypen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Vektoren.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Vektoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Matrizen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Matrizen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data.frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Logische_Operatoren.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Logische Operatoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Funktionen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Funktionen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Pakete.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Pakete</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Pipe_Operator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Pipe-Operator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Fehler.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Fehler</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Hilfe_aus_dem_Netz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Hilfe aus dem Netz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Best_Practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Best Practices</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Datenaufbereitung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Daten-importieren.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Daten importieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Datenvorbereitung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Datenvorbereitung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Fehlende-Werte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Fehlende Werte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Grafiken.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Grafiken</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Fehlermeldungen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Fehlermeldungen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Weiterführende Themen</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Installation und Aktualisierung von R und RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./magrittr_Pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">magrittr-Pipe ("%&gt;%")</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Wide-and-Long-Format.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Wide- &amp; Long-Format</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Git und GitLab</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Missings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Sind die Missings zufällig?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Voraussetzungspruefung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Annahmen der Multiplen Linearen Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Outputs-ALM-FAQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Outputs - ALM - FAQ</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Projekt-Dokumentation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Zur-Lernplattform-Beitragen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Zur R-Lernplattform Beitragen</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#bevor-es-losgeht" id="toc-bevor-es-losgeht" class="nav-link active" data-scroll-target="#bevor-es-losgeht"><span class="header-section-number">20.1</span> Bevor es losgeht</a>
  <ul class="collapse">
  <li><a href="#richtiges-datenformat" id="toc-richtiges-datenformat" class="nav-link" data-scroll-target="#richtiges-datenformat"><span class="header-section-number">20.1.1</span> Richtiges Datenformat</a></li>
  <li><a href="#welche-grafik-sollte-ich-für-meine-daten-nehmen" id="toc-welche-grafik-sollte-ich-für-meine-daten-nehmen" class="nav-link" data-scroll-target="#welche-grafik-sollte-ich-für-meine-daten-nehmen"><span class="header-section-number">20.1.2</span> Welche Grafik sollte ich für meine Daten nehmen?</a></li>
  </ul></li>
  <li><a href="#grundlegender-aufbau-von-ggplot" id="toc-grundlegender-aufbau-von-ggplot" class="nav-link" data-scroll-target="#grundlegender-aufbau-von-ggplot"><span class="header-section-number">20.2</span> Grundlegender Aufbau von ggplot()</a>
  <ul class="collapse">
  <li><a href="#ebene-1-grundlegendes-koordinatensystem" id="toc-ebene-1-grundlegendes-koordinatensystem" class="nav-link" data-scroll-target="#ebene-1-grundlegendes-koordinatensystem"><span class="header-section-number">20.2.1</span> Ebene 1: Grundlegendes Koordinatensystem</a></li>
  <li><a href="#ebene-2-art-der-grafik" id="toc-ebene-2-art-der-grafik" class="nav-link" data-scroll-target="#ebene-2-art-der-grafik"><span class="header-section-number">20.2.2</span> Ebene 2: Art der Grafik</a></li>
  </ul></li>
  <li><a href="#eine-variable" id="toc-eine-variable" class="nav-link" data-scroll-target="#eine-variable"><span class="header-section-number">20.3</span> Eine Variable</a>
  <ul class="collapse">
  <li><a href="#kategorial" id="toc-kategorial" class="nav-link" data-scroll-target="#kategorial"><span class="header-section-number">20.3.1</span> Kategorial</a></li>
  <li><a href="#metrisch" id="toc-metrisch" class="nav-link" data-scroll-target="#metrisch"><span class="header-section-number">20.3.2</span> Metrisch</a></li>
  </ul></li>
  <li><a href="#zwei-variablen" id="toc-zwei-variablen" class="nav-link" data-scroll-target="#zwei-variablen"><span class="header-section-number">20.4</span> Zwei Variablen</a>
  <ul class="collapse">
  <li><a href="#x-kategorial-y-metrisch" id="toc-x-kategorial-y-metrisch" class="nav-link" data-scroll-target="#x-kategorial-y-metrisch"><span class="header-section-number">20.4.1</span> X kategorial, Y metrisch</a></li>
  <li><a href="#x-und-y-metrisch" id="toc-x-und-y-metrisch" class="nav-link" data-scroll-target="#x-und-y-metrisch"><span class="header-section-number">20.4.2</span> X und Y metrisch</a></li>
  </ul></li>
  <li><a href="#mehr-als-zwei-variablen" id="toc-mehr-als-zwei-variablen" class="nav-link" data-scroll-target="#mehr-als-zwei-variablen"><span class="header-section-number">20.5</span> Mehr als zwei Variablen</a>
  <ul class="collapse">
  <li><a href="#mindestens-eine-kategoriale-variable" id="toc-mindestens-eine-kategoriale-variable" class="nav-link" data-scroll-target="#mindestens-eine-kategoriale-variable"><span class="header-section-number">20.5.1</span> Mindestens eine kategoriale Variable</a></li>
  <li><a href="#nur-kategoriale-variablen" id="toc-nur-kategoriale-variablen" class="nav-link" data-scroll-target="#nur-kategoriale-variablen"><span class="header-section-number">20.5.2</span> Nur kategoriale Variablen</a></li>
  </ul></li>
  <li><a href="#modifikationen" id="toc-modifikationen" class="nav-link" data-scroll-target="#modifikationen"><span class="header-section-number">20.6</span> Modifikationen</a>
  <ul class="collapse">
  <li><a href="#farbe" id="toc-farbe" class="nav-link" data-scroll-target="#farbe"><span class="header-section-number">20.6.1</span> Farbe</a></li>
  <li><a href="#legenden-modifizieren" id="toc-legenden-modifizieren" class="nav-link" data-scroll-target="#legenden-modifizieren"><span class="header-section-number">20.6.2</span> Legenden modifizieren</a></li>
  <li><a href="#beschriftung" id="toc-beschriftung" class="nav-link" data-scroll-target="#beschriftung"><span class="header-section-number">20.6.3</span> Beschriftung</a></li>
  <li><a href="#beschriftung-in-der-grafik" id="toc-beschriftung-in-der-grafik" class="nav-link" data-scroll-target="#beschriftung-in-der-grafik"><span class="header-section-number">20.6.4</span> Beschriftung in der Grafik</a></li>
  </ul></li>
  <li><a href="#kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen" id="toc-kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen" class="nav-link" data-scroll-target="#kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen"><span class="header-section-number">20.7</span> Kategoriale Variablen: Benennung und Reihenfolge der Ausprägungen</a>
  <ul class="collapse">
  <li><a href="#benennung" id="toc-benennung" class="nav-link" data-scroll-target="#benennung"><span class="header-section-number">20.7.1</span> Benennung</a></li>
  <li><a href="#reihenfolge" id="toc-reihenfolge" class="nav-link" data-scroll-target="#reihenfolge"><span class="header-section-number">20.7.2</span> Reihenfolge</a></li>
  </ul></li>
  <li><a href="#grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen" id="toc-grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen" class="nav-link" data-scroll-target="#grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen"><span class="header-section-number">20.8</span> Grafiken einzelner Gruppen und die Anpassung von Achsengrenzen</a></li>
  <li><a href="#geraden-einzeichnen" id="toc-geraden-einzeichnen" class="nav-link" data-scroll-target="#geraden-einzeichnen"><span class="header-section-number">20.9</span> Geraden einzeichnen</a></li>
  <li><a href="#weitere-statistische-kennwerte-ergänzen" id="toc-weitere-statistische-kennwerte-ergänzen" class="nav-link" data-scroll-target="#weitere-statistische-kennwerte-ergänzen"><span class="header-section-number">20.10</span> Weitere statistische Kennwerte ergänzen</a></li>
  <li><a href="#motive-themes" id="toc-motive-themes" class="nav-link" data-scroll-target="#motive-themes"><span class="header-section-number">20.11</span> Motive (Themes)</a></li>
  <li><a href="#grafiken-exportieren" id="toc-grafiken-exportieren" class="nav-link" data-scroll-target="#grafiken-exportieren"><span class="header-section-number">20.12</span> Grafiken exportieren</a>
  <ul class="collapse">
  <li><a href="#export-button" id="toc-export-button" class="nav-link" data-scroll-target="#export-button"><span class="header-section-number">20.12.1</span> <strong>Export-Button</strong></a></li>
  <li><a href="#ggsave" id="toc-ggsave" class="nav-link" data-scroll-target="#ggsave"><span class="header-section-number">20.12.2</span> <code>ggsave()</code></a></li>
  </ul></li>
  <li><a href="#weiterführende-hilfen" id="toc-weiterführende-hilfen" class="nav-link" data-scroll-target="#weiterführende-hilfen"><span class="header-section-number">20.13</span> Weiterführende Hilfen</a>
  <ul class="collapse">
  <li><a href="#eine-einfache-ggplot-funktion-qplot" id="toc-eine-einfache-ggplot-funktion-qplot" class="nav-link" data-scroll-target="#eine-einfache-ggplot-funktion-qplot"><span class="header-section-number">20.13.1</span> Eine einfache ggplot-Funktion: <code>qplot()</code></a></li>
  <li><a href="#mehrere-plots-zusammenführen" id="toc-mehrere-plots-zusammenführen" class="nav-link" data-scroll-target="#mehrere-plots-zusammenführen"><span class="header-section-number">20.13.2</span> Mehrere Plots zusammenführen</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/Methods-Berlin/RLernplattform/edit/main/Grafiken.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Methods-Berlin/RLernplattform/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Daten-importieren.html">Datenaufbereitung</a></li><li class="breadcrumb-item"><a href="./Grafiken.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Grafiken</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Grafiken</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Zur Verbreitung von wissenschaftlichen Untersuchungen ist es sinnvoll, Rohdaten oder Ergebnisse von statistischen Analysen übersichtlich darzustellen, um diese besser kommunizieren zu können. Dabei sind Grafiken zumeist die Methode der Wahl. Gute Grafiken sind anschaulich, wirkungsvoll und lassen einen wichtige Informationen auf einen Blick erfassen.</p>
<p>Es gibt drei führende Pakete zum Erstellen von Grafiken in R:</p>
<ul>
<li>Basispaket <strong>graphics</strong> (Funktionen wie z.B. <code>plot()</code> oder <code>hist()</code>)</li>
<li>Paket <strong>lattice</strong></li>
<li>Paket <strong>ggplot2</strong></li>
</ul>
<aside>
<strong>Basispakete</strong> sind von Anfang an in R enthalten, ohne dass wir sie herunterladen müssen.
</aside>
<p>Im Rahmen dieses Kapitels werden wir uns auf <strong>ggplot2</strong> konzentrieren. Mit diesem Paket haben wir eine große Bandbreite an Möglichkeiten, das Aussehen der Grafiken zu verändern. Außerdem können wir auf eine große Anzahl von verschiedenen Grafiken zurückgreifen wie z.B. den Violinenplot (siehe Abb. unten). Ein Violinenplot zeigt die Dichteverteilung eines metrischen Merkmals in Abhängigkeit eines kategorialen Merkmals.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Den <a href="#violinenplot"><strong>Violinenplot</strong></a> schauen wir uns später noch genauer an.
</aside>
<p>Zuerst schauen wir uns die grundlegende Funktionsweise von ggplot an. Dann lernen wir, wie wir (bekannte) Grafiken erstellen und modifizieren können. Abschließend erfahren wir, wie wir Grafiken exportieren können. Am Ende befindet sich außerdem eine Auswahl weiterführender Hilfen, die für die Visualisierung der eigenen Daten nützlich sein können.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Paket installieren ...</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>, <span class="at">dependencies=</span><span class="cn">TRUE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ... und laden</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside>
<br>
Bei Problemen beim Installieren bzw. Laden von Paketen schaut in unserem <a href="./Pakete.html#faq">FAQ-Eintrag</a> dazu vorbei.
</aside>
<details>
<summary>
Cheatsheet zu ggplot2
</summary>
<p>Um uns die Anwendung von ggplot2 zu erleichtern, können wir ein Cheatsheet in <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/translations/german/data-visualization_de.pdf" target="_blank">deutsch</a> oder <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization-2.1.pdf" target="_blank">englisch</a> herunterladen.</p>
<p>Auf der <a href="https://www.rstudio.com/resources/cheatsheets/" target="_blank">R-Studio Website</a> gibt es noch mehr Cheat Sheets, v.a. zu <code>tidyverse</code> Paketen.</p>
<p>Alternativ finden wir die englischen Cheat Sheets auch direkt in R-Studio. Dazu gehen wir in der Menüleiste am oberen Bildschirmrand auf <strong>Help</strong> –&gt; <strong>Cheatsheets</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/cheatsheets.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="700"></p>
</figure>
</div>
</div>
</div>
</details>
<details>
<summary>
Beispieldatensatzfür dieses Kapitel
</summary>
<p>Im Rahmen des Kapitels werden wir hauptsächlich mit dem Datensatz <code>ChickWeight</code> arbeiten, der standardmäßig im Basispaket <strong>datasets</strong> enthalten ist. Wir laden den Dataframe folgendermaßen in unseren Workspace:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(ChickWeight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Daten stammen aus einem Experiment, in dem der <strong>Einfluss des Futters auf das Wachstum von Küken</strong> untersucht wurde.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  weight Time Chick Diet
1     42    0     1    1
2     51    2     1    1
3     59    4     1    1
4     64    6     1    1
5     76    8     1    1
6     93   10     1    1</code></pre>
</div>
</div>
<p>Der Datensatz enthält vier Variablen. Mehr Informationen zu den Variablen finden wir <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/ChickWeight.html" target="_blank">hier</a>.</p>
<ul>
<li><code>weight</code>: Körpergewicht eines Kükens in Gramm</li>
<li><code>Time</code>: Tage seit der Geburt des Kükens</li>
<li><code>Chick</code>: Identifikationsnummer des Kükens</li>
<li><code>Diet</code>: Nummer der Futtergruppe (1, 2, 3, 4)</li>
</ul>
<p><br>
</p>
<p>Für den Abschnitt zu Visualisierungsmöglichkeiten bei <a href="#mehr-als-zwei-variablen">mehr als zwei Variablen</a> nutzen wir zusätzlich noch den Datensatz <strong>mpg</strong>, welcher im Paket <strong>ggplot2</strong> enthalten ist.</p>
<p>Wir laden diesen folgendermaßen in unser Environment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="ot">&lt;-</span> mpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…</code></pre>
</div>
</div>
Der Datensatz enthält 11 Variablen zum Benzinverbrauch von Automodellen in den Jahren 1999 bis 2008. Mehr Informationen zu den Variablen finden wir mit <code>?mpg</code>.
</details>
<section id="bevor-es-losgeht" class="level2" data-number="20.1">
<h2 data-number="20.1" class="anchored" data-anchor-id="bevor-es-losgeht"><span class="header-section-number">20.1</span> Bevor es losgeht</h2>
<p>Bevor wir uns in ggplot2 vertiefen, wollen wir überprüfen, ob unsere Daten in der benötigten <a href="Einfuehrung_in_R.qmd#datenstrukturen">Datenstruktur</a> vorliegen. Außerdem lernen wir einige Webseiten kennen, die uns dabei helfen, uns für eine Art der Visualisierung unserer Daten zu entscheiden.</p>
<section id="richtiges-datenformat" class="level3" data-number="20.1.1">
<h3 data-number="20.1.1" class="anchored" data-anchor-id="richtiges-datenformat"><span class="header-section-number">20.1.1</span> Richtiges Datenformat</h3>
<p>Bevor es losgehen kann, müssen wir erst einmal sicherstellen, dass unsere Daten auch in adäquater Form vorliegen. Um Grafiken mit <code>ggplot()</code> erzeugen zu können, müssen alle genutzen Variablen in einem gemeinsamen Dataframe vorliegen.</p>
<p>Das können wir folgendermaßen überprüfen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(ChickWeight)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Falls unser Datensatz nicht als Dataframe vorliegt, könnten wir ihn so umwandeln:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ChickWeight <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(ChickWeight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In Abhängigkeit der eigenen Fragestellung müssen die Daten im Long- bzw. Wide-Format vorliegen. Schauen wir uns den Unterschied einmal an der Fragestellung, wie sich das Gewicht der Küken (<code>weight</code>) zu unterschiedlichen Zeitpunkten (<code>Time</code>) verändert, an.</p>
<p>Wenn wir <code>Time</code> als Prädiktor für <code>weight</code> aufnehmen möchten, müssen die Daten im <strong>Long</strong>-Format vorliegen, damit <code>Time</code> auch als eigene Variable kodiert ist.</p>
<p>Wenn wir uns hingegen für eine Veränderung des Gewichts von Tag 0 (<code>Time 0</code>) zu Tag 2 (<code>Time 2</code>) interessieren, müssen die Daten im <strong>Wide</strong>-Format vorliegen, damit die Gewichtsdaten zu den Messzeitpunkten in einzelnen Spalten (Variablen) vorliegen.</p>
<p>Wenn wir wissen wollen, wie wir Daten vom Wide- ins Long-Format (oder vice versa) bekommen, dann können wir unser <a href="./Wide-and-Long-Format.html">Kapitel</a> dazu anschauen.<br>
</p>
<p>Außerdem <em>kann</em> es Probleme geben, wenn nominal- oder ordinalskalierte Variablen (z.B. <code>Diet</code>) im Datensatz nicht als <strong>Faktor</strong> vorliegen. Mit <code>str()</code> können wir uns anschauen, in welchem Daten- bzw. Objekttyp die Variablen eines Dataframes vorliegen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ChickWeight) <span class="co"># überprüfen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'nfnGroupedData', 'nfGroupedData', 'groupedData' and 'data.frame':  578 obs. of  4 variables:
 $ weight: num  42 51 59 64 76 93 106 125 149 171 ...
 $ Time  : num  0 2 4 6 8 10 12 14 16 18 ...
 $ Chick : Ord.factor w/ 50 levels "18"&lt;"16"&lt;"15"&lt;..: 15 15 15 15 15 15 15 15 15 15 ...
 $ Diet  : Factor w/ 4 levels "1","2","3","4": 1 1 1 1 1 1 1 1 1 1 ...
 - attr(*, "formula")=Class 'formula'  language weight ~ Time | Chick
  .. ..- attr(*, ".Environment")=&lt;environment: R_EmptyEnv&gt; 
 - attr(*, "outer")=Class 'formula'  language ~Diet
  .. ..- attr(*, ".Environment")=&lt;environment: R_EmptyEnv&gt; 
 - attr(*, "labels")=List of 2
  ..$ x: chr "Time"
  ..$ y: chr "Body weight"
 - attr(*, "units")=List of 2
  ..$ x: chr "(days)"
  ..$ y: chr "(gm)"</code></pre>
</div>
</div>
<p>Mit <code>factor()</code> können wir einzelne Spalten faktorisieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ChickWeight<span class="sc">$</span>Diet <span class="ot">&lt;-</span> <span class="fu">factor</span>(ChickWeight<span class="sc">$</span>Diet) <span class="co"># umwandeln</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Diet lag bereits vorher als ungeordneter Faktor vor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="welche-grafik-sollte-ich-für-meine-daten-nehmen" class="level3" data-number="20.1.2">
<h3 data-number="20.1.2" class="anchored" data-anchor-id="welche-grafik-sollte-ich-für-meine-daten-nehmen"><span class="header-section-number">20.1.2</span> Welche Grafik sollte ich für meine Daten nehmen?</h3>
<p>Falls wir noch auf der Suche nach einer informativen und ansprechenden Grafik für unsere Daten seid, können wir uns einen <strong>Überblick über geeignete Grafiken</strong> auf <a href="https://www.data-to-viz.com" target="_blank">from Data to Viz</a> verschaffen.</p>
<p>Für mehr <strong>Inspiration</strong> (sowie teilweise auch den R-Code) können wir auf den folgenden zwei Seiten nachschauen:</p>
<p>Auf <a href="https://www.r-graph-gallery.com" target="_blank">R Graph Gallery</a> finden wir verschiedene Grafiken nach Oberbegriffen (z.B. Zusammenhänge, Korrelation) sortiert und unterteilt in bestimmte Arten von Grafiken (z.B. Histogramm, Korrelogramm). Wenn wir auf die jeweilige Grafik klicken, kommen wir auf eine Seite, auf der es eine Definition und mehrere Beispielgrafiken, teils mit R-Code, gibt. Wir finden hier auch nicht nur Grafiken, die mit ggplot erstellt wurden.</p>
<p>Auf <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html" target="_blank">Top 50 ggplot2 Visualizations - The Master List</a> finden wir auch eine gute Übersicht möglicher ggplot-Grafiken für verschiedene Anliegen (z.B. Korrelation, Variation, Veränderung) mit den dazugehörigen R-Codes. Wir finden hier auch sehr einzigartige Visualisierungen wie z.B. Dendrogramme.</p>
</section>
</section>
<section id="grundlegender-aufbau-von-ggplot" class="level2 page-columns page-full" data-number="20.2">
<h2 data-number="20.2" class="anchored" data-anchor-id="grundlegender-aufbau-von-ggplot"><span class="header-section-number">20.2</span> Grundlegender Aufbau von ggplot()</h2>
<p>Das <strong>gg</strong> in <code>ggplot()</code> steht für <strong>g</strong>rammar of <strong>g</strong>raphics. ggplot strebt einen intuitiven Ansatz zur Erstellung von Grafiken an. Die essenziellen drei Komponenten, die wir zur Erstellung jeder Grafik benötigen, sind:</p>
<ol type="1">
<li><strong>Datensatz</strong><br>
Diesen übergeben wir an das Argument <code>data</code>.</li>
<li><strong>ästhetische Mappings</strong> (aesthetics)<br>
Diese werden in <code>aes()</code> festgelegt. Dazu gehören u.a. die x- und y-Dimensionen, Farben und Größe.</li>
<li><strong>geometrische Objekte</strong> (geoms)<br>
Diese werden in <code>geom()</code> festgelegt. Die Formen, mit denen die Daten dargestellt werden, sind z.B. Punkte, Linien, Balken.</li>
</ol>
<p>Die Besonderheit an ggplot ist, dass wir verschiedene <strong>Ebenen</strong> übereinander legen. Diese Ebenen verbinden wir syntaktisch jeweils mit einem <code>+</code>. Das Grundgerüst ist dabei das Koordinatensystem (1. Ebene) und die Art der Grafik, die wir mittels geometrischer Objekt festlegen (2. Ebene). Zusätzlich können wir diese beiden Ebenen modifizieren (z.B. Farben der geometrischen Objekte ändern) und ebenso neue Ebenen ergänzen (z.B. Beschriftung).</p>
<p>Die Ebenen können wir auch als <strong>Teilfunktionen</strong> begreifen, die eine Grafik konstituieren. Was wir z.B. bei <code>plot(..., main="...")</code> in einer Funktion realisieren können (das Koordinatensystem, die Art der Grafik - ein Streudiagramm - und die Beschriftung) machen wir in ggplot mit mehreren Teilfunktionen (<code>ggplot() + geom_point() + ggtitle()</code>).</p>
<section id="ebene-1-grundlegendes-koordinatensystem" class="level3 page-columns page-full" data-number="20.2.1">
<h3 data-number="20.2.1" class="anchored" data-anchor-id="ebene-1-grundlegendes-koordinatensystem"><span class="header-section-number">20.2.1</span> Ebene 1: Grundlegendes Koordinatensystem</h3>
<p>Das Koordinatensystem spezifizieren wir mit <code>ggplot()</code>. Dem Parameter <code>data</code> übergeben wir den <strong>Datensatz (1)</strong>. Das <strong>ästhetische Mapping (2)</strong> legen wir mit <code>aes()</code> fest. Diesem geben wir die Namen der Variablen, die auf der x- und y-Achse dargestellt werden sollen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/coordinate system-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Wir können <code>aes()</code> aber nicht nur in <code>ggplot()</code>, d.h. dem grundlegenden Koordinatensystem, sondern auch in anderen Ebenen (z.B. <code>geom_point()</code>) nutzen.
</aside>
<p>Wie bei anderen Funktionen können wir die Parameterbezeichnung <code>data</code>, <code>x</code> und <code>y</code> weglassen und nur die Argumente (d.h. die Namen des Datensatzes bzw. der Variablen) angeben. Bei x und y müssen wir dann aber unbedingt die Reihenfolge einhalten: <code>ggplot(ChickWeight, aes(Time, weight))</code>.</p>
</section>
<section id="ebene-2-art-der-grafik" class="level3 page-columns page-full" data-number="20.2.2">
<h3 data-number="20.2.2" class="anchored" data-anchor-id="ebene-2-art-der-grafik"><span class="header-section-number">20.2.2</span> Ebene 2: Art der Grafik</h3>
<p>Bisher wurde nur das Koordinatensystem mit den jeweiligen Achsengrenzen der Variablen erstellt. Wenn wir die Daten nun plotten möchten, müssen wir noch festlegen, <em>wie</em> die Daten dargestellt werden sollen (z.B. die Häufigkeit als Balken, die bivariate Verteilung als Punkte). Dazu nutzten wir <strong>geometrische Objekte(3)</strong>, die wir mit den <code>geom</code>-Funktionen festlegen (z.B. <code>geom_line()</code> für Linien oder <code>geom_bar()</code> für Balken). Damit ergänzen wir den Plot um eine neue Ebene.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Hier sehen wir, wie die 1. Ebene, das grundlegende Koordinatensystem <code>ggplot(...)</code>, mit der 2. Ebene, den geplotteten Daten <code>geom_point(...)</code> durch das <code>+</code> verknüpft wurden.
</aside>
<p>Nachdem wir uns nun mit dem grundlegenden Aufbau von <code>ggplot()</code> vertraut gemacht haben, schauen wir uns nun an, wie wir spezifische Arten von Grafiken erstellen.</p>
</section>
</section>
<section id="eine-variable" class="level2 page-columns page-full" data-number="20.3">
<h2 data-number="20.3" class="anchored" data-anchor-id="eine-variable"><span class="header-section-number">20.3</span> Eine Variable</h2>
<p>Zuerst schauen wir uns an, wie wir die Häufigkeitsverteilung einer Variablen visualisieren können.</p>
<section id="kategorial" class="level3 page-columns page-full" data-number="20.3.1">
<h3 data-number="20.3.1" class="anchored" data-anchor-id="kategorial"><span class="header-section-number">20.3.1</span> Kategorial</h3>
<p>Hierfür nehmen wir die Variable <code>Diet</code>. Diese kodiert die Gruppen, in denen das Futter der Küken variiert wurde.</p>
<p><a href="#kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen">Später</a> erfahren wir noch, wie wir die Reihenfolge und Benennung von kategorialen Variablen ändern können.</p>
<section id="balkendiagramm" class="level4 page-columns page-full" data-number="20.3.1.1">
<h4 data-number="20.3.1.1" class="anchored" data-anchor-id="balkendiagramm"><span class="header-section-number">20.3.1.1</span> Balkendiagramm</h4>
<p>Um ein Balkendiagramm zu erzeugen, nutzen wir <code>geom_bar()</code>. Standardmäßig werden mit <code>geom_bar()</code> <strong>absolute</strong> Häufigkeiten (count) geplottet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir können folgendermaßen auch die <strong>relativen</strong> Häufigkeiten (prob) plotten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(prop), <span class="at">group=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit <code>+ coord_flip()</code> können wir das Diagramm <strong>um 90° nach rechts kippen</strong>. Jetzt ist auf der x-Achse die Häufigkeit und auf der y-Achse die Gruppierung abgebildet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir können auch sogenannte <strong>gestapelte Balkendiagramme</strong> (<em>stacked bar plots</em>) anfertigen.</p>
<p>Dazu müssen erst einen neuen Dataframe erzeugen, in welchem die Gruppennamen sowie die (absoluten) Häufigkeiten der Variablen je als neue Variable gespeichert sind.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Häufigkeitstabelle von Diet erstellen und in Dataframe konvertieren:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>freq_Diet <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(ChickWeight<span class="sc">$</span>Diet))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (optional) Spalten umbenennen:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(freq_Diet) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Futtergruppe"</span>, <span class="st">"Häufigkeit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mit diesem Dataframe erstellen wir nun ein gestapeltes Balkendiagramm:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>freq_Diet, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span>Häufigkeit, <span class="at">fill=</span>Futtergruppe)) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Auf die Integration von Farben, hier durch den Parameter <code>fill</code>, gehen wir später im Abschnitt zu <a href="#farbe">Farbe</a> noch ausführlicher ein.
</aside>
<p>Mehr Informationen zur Erstellung von gestapelten sowie auch gruppierten Balkendiagrammen finden wir <a href="https://www.r-graph-gallery.com/stacked-barplot.html" target="_blank">hier</a>. Beide Grafiken eignen sich auch gut, um Gruppierungskombinationen mit noch einer weitere kategorialen Variablen darzustellen.</p>
</section>
<section id="kreisdiagramm" class="level4 page-columns page-full" data-number="20.3.1.2">
<h4 data-number="20.3.1.2" class="anchored" data-anchor-id="kreisdiagramm"><span class="header-section-number">20.3.1.2</span> Kreisdiagramm</h4>
<p>Um ein Kreisdiagramm zu erstellen, müssen wir, analog zur Erstellung von gestapelten Balkendiagrammen, zuerst einen neuen Dataframe erzeugen, in welchem die Namen und (absoluten) Häufigkeiten der Gruppen der Variablen als neue Variablen vorhanden sind.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Häufigkeitstabelle von Diet erstellen und in Dataframe konvertieren:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>freq_Diet <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(ChickWeight<span class="sc">$</span>Diet))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># (optional) Spalten umbenennen:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(freq_Diet) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Futtergruppe"</span>, <span class="st">"Häufigkeit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Auch das weitere Vorgehen überschneidet sich weitest mit dem der Erstellung eines gestapelten Balkendiagrammes. Wir müssen lediglich noch <code>+ coord_polar("y")</code> ergänzen, damit die Anteile der Häufigkeiten in Polarkoordinaten überführt werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>freq_Diet, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span>Häufigkeit, <span class="at">fill=</span>Futtergruppe)) <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Auf Farben gehen wir im <a href="#farbe">gleichnamigen Abschnitt</a> später noch ausführlicher ein.
</aside>
<p>Auf dieser <a href="http://www.sthda.com/english/wiki/ggplot2-pie-chart-quick-start-guide-r-software-and-data-visualization" target="_blank">Seite</a> finden wir weitere Hilfe zur Erstellung und Modifikation von Kreisdiagrammen.</p>
<!-- Um ein Kreisdiagramm mit `ggplot` zu erzeugen, benötigen wir ein Balkendiagramm, welches in Polarkoordinaten überführt wird.  -->
<!-- ```{r} -->
<!-- ggplot(data=ChickWeight, aes(x=Diet, fill=Diet)) + -->
<!--   geom_bar() + # Balkendiagramm -->
<!--   coord_polar() + # Polarkoordinaten -->
<!--   labs(x = NULL) # keine x-Achsenbeschriftung (wäre hier irreführend) -->
<!-- ``` -->
<!-- <details><summary>Unterschied zum "sonst üblichen" Kreisdiagramm</summary> -->
<!-- Die so erzeugten Kreisdiagramme unterscheiden sich optisch von den "üblichen" Kreisdiagrammen (die wir auch mit der base graphics Funktion `pie()` erstellen können). -->
<!-- ```{r base r, out.width = "600px", fig.align="center"} -->
<!-- pie(table(ChickWeight$Diet), # Häufigkeiten der Kategorien -->
<!--     labels = levels(ChickWeight$Diet), # Namen der Kategorien -->
<!--     main="Anzahl der Küken in den Fütterungsgruppen") # Titel der Grafik -->
<!-- ``` -->
<!-- Im Kreisdiagramm von ggplot sind die Häufigkeiten in den Gruppen durch den *Radius* der Kreissegmente bestimmt. Der "Maßstab" für die Häufigkeit ist an der y-Achse abgetragen. Bei einem klassischen base graphics Kreisdiagramm wird der Kreisausschnitt variiert, während der Radius in allen Gruppen ("Stücken") gleichbleibt. -->
<!-- </details> -->
<!--  -->
<!-- Auf dieser <a href="http://www.sthda.com/english/wiki/ggplot2-pie-chart-quick-start-guide-r-software-and-data-visualization" target="_blank">Seite</a> finden wir Hilfe z.B. dazu, wie wir Farben ändern oder das Diagramm weiter anpassen können (customized). <a href="https://www.r-bloggers.com/pie-charts-in-ggplot2/" target="_blank">Hier</a> finden wir z.B. eine Anleitung, wie wir mehrere Kreisdiagramme für verschiedene Gruppen erstellen (z.B. Antworten auf ein Item, jeweils für Männer und Frauen getrennt). -->
</section>
</section>
<section id="metrisch" class="level3" data-number="20.3.2">
<h3 data-number="20.3.2" class="anchored" data-anchor-id="metrisch"><span class="header-section-number">20.3.2</span> Metrisch</h3>
<p>Beispielhaft schauen wir uns hierfür das Gewicht der Küken (<code>weight</code>) an.</p>
<section id="histogramm" class="level4" data-number="20.3.2.1">
<h4 data-number="20.3.2.1" class="anchored" data-anchor-id="histogramm"><span class="header-section-number">20.3.2.1</span> Histogramm</h4>
<p>Mit Hilfe von Histogrammen können wir uns die Verteilung einer metrischen Variablen anschauen. Um ein Histogramm zu erstellen, nutzen wir <code>geom_histogram()</code>.</p>
<details>
<summary>
Richtlinien zur Kategorisierung einer metrischen Variablen
</summary>
<p>Bevor wir eine metrische Variable zum Zwecke der grafischen Darstellung kategorisieren, sollten wir uns Gedanken über die <strong>Anzahl und Breite der Kategorien</strong> machen, in die wir die Daten einteilen möchten. Es ist meist nicht sinnvoll, die Häufigkeiten der Rohwerte von metrischen Variablen zu plotten, weil identische Messwerte selten vorliegen. Daher ist es sinnvoll, die Rohdaten zu gruppieren. Dazu müssen wir uns Gedanken über die Intervallgröße dieser Kategorien machen (<strong>“Problem der Kategorisierung”</strong>). Durch Vergrößerung gehen (relevante) Informationen verloren; durch Verkleinerung bleiben (zu viele) idiosynkratische Merkmale erhalten.</p>
<p>Prinzipiell gilt:</p>
<ul>
<li>Je größer eine Stichprobe ist, desto schmaler können die einzelnen Kategorien sein (d.h. mehr Kategorien).
<ul>
<li>Als Orientierung können wir hierfür die <strong>Sturges Regel</strong> nutzen:<br>
<span class="math inline">\(m ≈ 1 + 3.32 \cdot lg(N)\)</span> (<span class="math inline">\(m\)</span> = Anzahl der Kategorien, <span class="math inline">\(N\)</span> = Stichprobengröße, <span class="math inline">\(lg\)</span> = dekadischer Logarithmus)</li>
</ul></li>
</ul>
<p>Schauen wir uns die ungefähre Anzahl der Kategorien nach der Sturges Regel an. Dazu nutzen wir die Funktion <code>nclass.Sturges(1:Stichprobengröße)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gibt es fehlende Werte?</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anyNA</span>(ChickWeight<span class="sc">$</span>weight) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## wenn nein:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nclass.Sturges</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(ChickWeight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## wenn ja:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nclass.Sturges(1:table(is.na(ChickWeight$weight))[[2]])</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># table(is.na(ChickWeight$weight))[[2]] gibt uns die Anzahl der vorhanden werte</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nach Sturges Regel sollten wir für <code>weight</code> in etwa 11 Kategorien bilden.</p>
<ul>
<li>Je größer die Streuung der Variablen, desto breiter können die einzelnen Kategorien sein (d.h. weniger Kategorien).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight) <span class="co"># kleinster Wert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(ChickWeight<span class="sc">$</span>weight) <span class="co"># größter Wert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 373</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variationsbreite (Streuung) = größter minus kleinster Wert:</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(ChickWeight<span class="sc">$</span>weight) <span class="sc">-</span> <span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 338</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bei Vorhandensein von fehlenden Werten:</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># min(..., na.rm=TRUE) bzw. max(..., na.rm=TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Es ist sinnvoll, zuerst nach Sturges Regel eine Anzahl an Bins zu errechnen, und diese dann ggf. in Abhängigkeit der Variationsbreite des Merkmals zu verändern.</p>
<p>Generell sollten wir <strong>nicht mehr als 20 Kategorien</strong> bilden. Diese sollten im Regelfall auch ungefähr die gleiche Breite aufweisen.</p>
</details>
<p>Wir erstellen ein Histogramm von <code>weight</code> mit den empfohlenen 11 Kategorien, welche wir mit dem Argument <code>bins</code> erstellen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>weight)) <span class="sc">+</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">11</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/hist bins-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<details>
<summary>
Problem der korrekten Darstellung der Variationsbreite
</summary>
<p>Grundsätzlich ist es, sowohl in base graphics als auch in ggplot, problematisch, den <em>wahren</em> Range (d.h. die Variationsbreite) einer Variablen darzustellen. Ohne explizite Eingabe der Grenzen werden diese leider nicht berücksichtigt. Das kann zu einem falschen Eindruck der Variationsbreite der Variablen führen.</p>
<p>Dieses Problem demonstrieren wir einmal an obigem Beispiel.</p>
<p>Mit <code>geom_vline(xintercept)</code> erstellen wir zwei vertikale Linien, die den kleinsten bzw. größten beobachteten Wert von <code>weight</code> markieren. Diese nutzen wir zur Veranschaulichung der Problematik.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>weight)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">11</span>) <span class="sc">+</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight)) <span class="sc">+</span> <span class="co"># kleinster Wert</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">max</span>(ChickWeight<span class="sc">$</span>weight)) <span class="co"># größter Wert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/hist bins range-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wie wir sehen haben wir zwar die gewünschten 11 Kategorien, aber diese sind leider so eingeteilt, dass die äußeren Kategorien über den kleinsten und größten beobachteten Wert von <code>weight</code> hinausgehen (d.h. sie sind zu groß).</p>
<p>Um das Problem in den Griff zu bekommen, nutzen wir das Argument <code>breaks</code>, mit dem wir die Kategoriengrenzen manuell festlegen. Diesem übergeben wir die Funktion <code>seq(from, to, by)</code>, die uns eine reguläre Sequenz erstellt (damit wir nicht alle Grenzen einzeln eingeben müssen). Auch hier wollen wir wieder die empfohlenen 11 Kategorien haben, daher teilen wir den Range (373-35) von <code>weight</code> durch 11.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>weight)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">373</span>, (<span class="dv">373-35</span>)<span class="sc">/</span><span class="dv">11</span>)) <span class="sc">+</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight)) <span class="sc">+</span> <span class="co"># kleinster Wert</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fu">max</span>(ChickWeight<span class="sc">$</span>weight)) <span class="co"># größter Wert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/hist solution-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
Wie wir an den vertikalen Linien sehen, hält die Breite der Kategorien insgesamt jetzt den Range von <code>weight</code> ein.
</details>
<p>Weiterführend finden wir zusätzliche Modifikationen für Histogramme auf dieser <a href="http://www.sthda.com/english/wiki/ggplot2-histogram-easy-histogram-graph-with-ggplot2-r-package" target="_blank">Seite</a>.</p>
</section>
<section id="dichtefunktion" class="level4" data-number="20.3.2.2">
<h4 data-number="20.3.2.2" class="anchored" data-anchor-id="dichtefunktion"><span class="header-section-number">20.3.2.2</span> Dichtefunktion</h4>
<p>Die Dichteverteilung einer kontinuierlichen Variablen können wir mit <code>geom_density()</code> einzeichnen. Per Default wird dafür die Gaußsche Dichtefunktion (<code>kernel = "gaussian"</code>) genutzt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>weight)) <span class="sc">+</span> <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="zwei-variablen" class="level2 page-columns page-full" data-number="20.4">
<h2 data-number="20.4" class="anchored" data-anchor-id="zwei-variablen"><span class="header-section-number">20.4</span> Zwei Variablen</h2>
<p>Nun schauen wir uns die grafische Darstellung von <strong>Zusammenhängen</strong> zwischen zwei Variablen an.</p>
<section id="x-kategorial-y-metrisch" class="level3 page-columns page-full" data-number="20.4.1">
<h3 data-number="20.4.1" class="anchored" data-anchor-id="x-kategorial-y-metrisch"><span class="header-section-number">20.4.1</span> X kategorial, Y metrisch</h3>
<p><a href="#kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen">Später</a> erfahren wir noch, wie wir die Reihenfolge und Benennung von kategorialen Variablen ändern können.</p>
<section id="boxplot" class="level4" data-number="20.4.1.1">
<h4 data-number="20.4.1.1" class="anchored" data-anchor-id="boxplot"><span class="header-section-number">20.4.1.1</span> Boxplot</h4>
<p>Wenn wir uns die Merkmalsverteilung einer metrischen Variable in Abhängigkeit einer kategorialen Variablen anschauen möchten, können wir Boxplots nutzen.</p>
<details>
<summary>
Welche Kennwerte werden in Boxplots dargestellt?
</summary>
<p>In Boxplots werden mehrere deskriptiv-statistische Kennwerte dargestellt:</p>
<ul>
<li>zentrale Tendenz:
<ul>
<li><strong>Median</strong>: dargestellt durch die dicken, <em>horizontalen Linien</em> in den Boxen</li>
</ul></li>
<li>Variabilität:
<ul>
<li><strong>Interquartilsrange</strong> (IQR): mittlere 50% der Verteilung, dargestellt durch die <em>Boxen</em></li>
<li><strong>Whisker</strong>: größter bzw. kleinster beobachteter Wert innerhalb der oberen bzw. unteren Ausreißergrenzen, dargestellt durch die <em>vertikale Linien</em> an den Boxen</li>
<li><strong>Ausreißer</strong>: einzelne Beobachtungen außerhalb der Whisker, dargestellt durch <em>Punkte</em></li>
</ul></li>
</ul>
</details>
<p>Einen Boxplot erhalten wir mit <code>geom_boxplot()</code>. Wenn wir fehlende Werte in unseren Daten haben, müssen wir noch das Argument <code>na.rm = TRUE</code> ergänzen, welches diese (aus der Grafik) entfernt.</p>
<p>Wir schauen uns das Gewicht der Küken (<code>weight</code>) zum zweiten Messzeitpunkt (<code>Time 2</code>) in Abhängigkeit der Fütterung (<code>Diet</code>) an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">2</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a name="index"></a></p>
<details>
<summary>
Erweiterte Indexierung: Wie können wir nur bestimmte Daten (z.B. nur Daten zum zweiten Messzeitpunkt) für <code>ggplot()</code> auswählen?
</summary>
<p>Wenn wir nicht alle Daten, sondern nur solche, auf die bestimmte Bedingungen zutreffen, auswählen wollen, können wir dazu die Indexierung mittels der eckigen Klammern <code>[]</code> nutzen.</p>
<p>Für unser Beispiel wollen wir uns nur die Daten des zweiten Messzeitpunkts (<code>Time 2</code>) anschauen. Formal würde (nur) die <strong>Bedingung</strong> so aussehen: <code>ChickWeight$Time == 2</code>. Diese wollen wir noch <strong>auf unseren Dataframe anwenden</strong>; dazu nutzen wir die eckigen Klammern: <code>ChickWeight[ChickWeight$Time == 2,]</code>.</p>
<p>Mit dem Komma legen wir fest, welche der beiden Dimensionen unseres Dataframes wir meinen (Zeile, Spalte). Weil wir <em>Fälle</em> mit bestimmten Ausprägungen (Bedingungen) auswählen wollen, setzen wir das Komma <em>am Ende</em>.</p>
Zu beachten ist außerdem, dass wir die Indexierung bereits in der grundlegenden Ebene, d.h. in <code>ggplot(data, ...)</code>, festlegen müssen. <a href="#grundlegender-aufbau-von-ggplot">Zu Beginn</a> haben wir gelernt, dass wir durch die Übergabe des Dataframes an <code>ggplot(data, ...)</code> das grundlegende Koordinatensystem erstellen und damit die Anzahl der Datenpunkte (Beobachtungen) festlegen. Folglich würde es nicht funktionieren, die Selektion erst in einer späteren Ebene vorzunehmen, weil die an Anzahl der Datenpunkte sich unterscheiden würde.
</details>
</section>
<section id="violinenplot" class="level4 page-columns page-full" data-number="20.4.1.2">
<h4 data-number="20.4.1.2" class="anchored" data-anchor-id="violinenplot"><span class="header-section-number">20.4.1.2</span> Violinenplot</h4>
<p>Der Violinenplot ist eine Variante von Boxplots, in dem die <strong>Dichtefunktion</strong> eines metrischen Merkmals grafisch dargestellt wird. Diese wird an der Senkrechten zur x-Achse <em>gespiegelt</em>.</p>
<p>Um die Grafiken mit dem Boxplot aus dem letzten Abschnitt vergleichen zu können, schauen wir uns hier ebenfalls das Gewicht der Küken (<code>weight</code>) zum zweiten Messzeitpunkt (<code>Time 2</code>) in Abhängigkeit der Diät (<code>Diet</code>) an.</p>
<aside>
<a href="#index">Hier</a> wird das Indexieren der Daten (zum zweiten Messzeitpunkt) erklärt.
</aside>
<p>Generell können wir den Violinenplot mit <code>geom_violin()</code> erstellen. Zusätzlich gibt es hier einen sehr wichtigen Parameter: <code>scale</code>. Mit diesem legen wir fest, ob die einzelnen “Violinen” in der <strong>gleichen Größe</strong> (<code>area</code>; <em>voreingestellt</em>) oder in <strong>Größen proportional zur Anzahl der Beobachtungen in jeder Gruppe</strong> (<code>count</code>) dargestellt werden sollen.</p>
<p>Wir schauen uns unsere Daten einmal in beiden Modi an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">2</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">"area"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">2</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Wir sehen, dass die Größen derselben “Violinen” sich in den beiden Grafiken unterscheiden. Das liegt daran, dass bei ersterer Grafik (<code>scale=area</code>) die Anzahl der Beobachtungen pro Gruppe unbeachtet bleibt, während sie in zweiter Grafik (<code>scale=count</code>) über die relative Größe der “Violinen” visualisiert wird. Wenn wir gleich große Gruppen hätten, würden wir keinen Unterschied zwischen den beiden Grafiken erkennen.</p>
</section>
<section id="gruppenmittelwerte-visualisieren" class="level4 page-columns page-full" data-number="20.4.1.3">
<h4 data-number="20.4.1.3" class="anchored" data-anchor-id="gruppenmittelwerte-visualisieren"><span class="header-section-number">20.4.1.3</span> Gruppenmittelwerte visualisieren</h4>
<p><em>Im Folgenden schauen wir uns die finalen (<code>Time 21</code>) <strong>Mittelwerte</strong> des Gewichts der Küken (<code>weight</code>) in den einzelnen Futtergruppen (<code>Diet</code>) an. Dabei wollen wir außerdem die <strong>95%-Konfidenzintervalle</strong> für die einzelnen Mittelwerte einzeichnen.</em></p>
<aside>
<a href="#index">Hier</a> wird das Indexieren der Daten (zum finalen Messzeitpunkt) erklärt.
</aside>
<p>Wenn wir aggregierte Daten einer statistischen Analyse (z.B. Gruppenmittelwerte bei einem <span class="math inline">\(t\)</span>-Test) darstellen möchten, ist ein weit verbeiteter Ansatz, Balkendiagramme mit Fehlerbalken zu nutzen.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="350"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
<br>
Negativbeispiel
</aside>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Das Problem bei diesem Ansatz ist, dass Personen dazu neigen, die Werte (innerhalb des 95% Konfidenzintervalls), die innerhalb der Balken liegen, als statistisch wahrscheinlicher wahrzunehmen als jene, die außerhalb der Balken liegen. Dieses Phänomen ist als Within-the-bar Bias bekannt. Es ist daher sinnvoll, für die Darstellung von Mittelwerten <strong>keine Balkendiagramme zu nutzen</strong>, sondern auf geeignetere Visualisierungen zurückzugreifen.</p>
</blockquote>
<p>Beispielsweise vermitteln einzelne Punkte (für die Mittelwerte) mit Fehlerbalken die relevanten Informationen besser.</p>
<p>Generell um statistische Kennwerte zu ergänzen, nutzen wir die Funktion <code>stat_summary()</code> (mehr dazu <a href="#weitere-statistische-kennwerte-ergänzen">hier</a>). Mit <code>fun.data="mean_cl_normal"</code> bekommen wir Mittelwerte mit 95% Konfindenzintervallen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data=</span><span class="st">"mean_cl_normal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Positivbeispiel
</aside>
<p>Wenn wir zusätzlich noch unsere Informationsdichte erhöhen wollen, d.h. nicht nur den Mittelwert, sondern die <strong>Verteilung in den einzelnen Gruppen</strong> visualisieren wollen, können wir <a href="#violinenplot">Violinenplots</a> integrieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale=</span><span class="st">"count"</span>) <span class="sc">+</span> <span class="fu">stat_summary</span>(<span class="at">fun.data=</span><span class="st">"mean_cl_normal"</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reihenfolge beachten! erst Violinenplot, dann Mittelwerte darüber</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Positivbeispiel
</aside>
</section>
</section>
<section id="x-und-y-metrisch" class="level3 page-columns page-full" data-number="20.4.2">
<h3 data-number="20.4.2" class="anchored" data-anchor-id="x-und-y-metrisch"><span class="header-section-number">20.4.2</span> X und Y metrisch</h3>
<section id="streudiagramm" class="level4 page-columns page-full" data-number="20.4.2.1">
<h4 data-number="20.4.2.1" class="anchored" data-anchor-id="streudiagramm"><span class="header-section-number">20.4.2.1</span> Streudiagramm</h4>
<p>Mit Streudiagrammen (<em>Scatterplots</em>) können wir Wertepaare zweier kontinuierlicher Variablen grafisch darstellen. Das machen wir mit <code>geom_point()</code>.</p>
<p>Wir schauen uns im Folgenden den Zusammenhang von Zeit seit dem Schlüpfen (<code>Time</code>) und dem Gewicht in Gramm (<code>weight</code>) der Küken an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
Wie wir die Datenpunkte in Abhängigkeit einer weiteren kategorialen Variablen einfärben können, erfahren wir im Abschnitt <a href="#farbe">Farben</a>.
</aside>
</section>
<section id="overplotting-vermeiden" class="level4" data-number="20.4.2.2">
<h4 data-number="20.4.2.2" class="anchored" data-anchor-id="overplotting-vermeiden"><span class="header-section-number">20.4.2.2</span> Overplotting vermeiden</h4>
<p>Wenn wir sehr große Datensätze haben, könnten wir das Problem haben, dass wir individuelle Daten optisch nicht mehr gut unterscheiden können, weil viele Datenpunkte übereinander liegen. Dieses Problem nennt man auch <strong>Overplotting</strong>. Im Folgenden schauen wir uns einige Möglichkeiten an, wie wir das Problem beheben können.</p>
<p>Hierfür schauen wir uns wieder den Zusammenhang von Zeit seit dem Schlüpfen (<code>Time</code>) und dem Gewicht in Gramm (<code>weight</code>) der Küken an.</p>
<section id="punkte-modifizieren" class="level5" data-number="20.4.2.2.1">
<h5 data-number="20.4.2.2.1" class="anchored" data-anchor-id="punkte-modifizieren"><span class="header-section-number">20.4.2.2.1</span> Punkte modifizieren</h5>
<p>Wir können die Formen <strong>verkleinern</strong> mit dem Parameter <code>size</code> (Breite der Linie in mm), …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/scatter diamond small-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>… die Form <strong>ändern</strong> mit dem Parameter <code>shape</code>, …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/scatter diamond shape-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>… oder die Form <strong>transparent</strong> machen mit dem Parameter <code>alpha</code> (0 &lt; <code>alpha</code> &lt; 1).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/scatter diamond transparent-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="jittern" class="level5" data-number="20.4.2.2.2">
<h5 data-number="20.4.2.2.2" class="anchored" data-anchor-id="jittern"><span class="header-section-number">20.4.2.2.2</span> Jittern</h5>
<p>“Jittern” heißt, dass wir etwas <em>zufälliges Rauschen</em> einfügen, damit die Datenpunkte etwas voneinander abweichen.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Weil wir hiermit aber einen falschen Eindruck von den Daten vermitteln könnten, sollten wir die <strong>Verwendung von gejitterten Daten immer kennzeichnen</strong>.</p>
</blockquote>
<p>Per default werden die Punkte in 80% der Breite der implizierten Bins (z.B. der Bin von <code>Time 0</code>) geplottet, sodass die Bins optisch noch gut voneinander zu trennen sind. Mit dem Parameter <code>width</code> können wir die Breite anpassen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/jitter diamond-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mehr (aber zu viel) Variation:</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">width=</span><span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/jitter diamond2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Es gibt noch weitere Möglichkeiten Overplotting zu vermeiden. Auf dieser <a href="https://www.statworx.com/de/blog/how-not-to-overplot/" target="_blank">Seite</a> finden wir noch andere Beispiele sowie ihre Umsetzung in R.</p>
</section>
</section>
<section id="regressionsgerade-einzeichnen" class="level4 page-columns page-full" data-number="20.4.2.3">
<h4 data-number="20.4.2.3" class="anchored" data-anchor-id="regressionsgerade-einzeichnen"><span class="header-section-number">20.4.2.3</span> Regressionsgerade einzeichnen</h4>
<p>Wir können unsere <strong>bivariaten</strong> Daten zusätzlich noch durch eine Funktion beschreiben lassen. Häufig nutzen wir dafür Regressionsmodelle.</p>
<p>Die Regressionsgerade eines <strong>einfachen</strong> linearen Regressionsmodells können wir mit <code>geom_smooth(method="lm")</code> über unser Streudiagramm legen.</p>
<p>Per default wird nicht nur eine Regressionsgerade eingezeichnet, sondern auch das 95%-Konfidenzintervall um die Gerade gelegt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">method=</span><span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/reg line and scatter-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Das Konfidenzintervall um die Regressionsgerade könnten wir mit <code>se=FALSE</code> weglassen. Generell ist es aber sinnvoll, die Genauigkeit unseres Regressionsmodells in die Grafik miteinzubeziehen.<br>
<br>
Wenn wir die Datenpunkte in einem Streudiagramm mit Regressionsgerade einfärben wollen <strong>ohne</strong> gruppenspezifische Regressionsgeraden zu erhalten, müssen wir <code>aes(col)</code> in <code>geom_point()</code>, und nicht in <code>ggplot()</code>, spezifizieren.
</aside>
<!--

Quelle: https://educationalresearchtechniques.com/2016/10/03/linear-regression-lines-and-facets-in-ggplot2/

<details><summary>Farbliche Hervorhebung</summary>

Wir können zusätzlich noch die Information einer kategorialen Variablen in unsere Visualisierung miteinbeziehen. Wir können entweder die Datenpunkte entsprechend der Gruppenzugehörigkeit färben oder für jede Gruppe separate Regressionsgeraden einzeichnen.

Datenpunkte einer bestimmten Gruppe können mit <span class ="code">**stat**_smooth(**data, aes(x, y),** method = 'lm') farblich hervorgehoben werden.

Hierbei müssen wir allerdings eines beachten: Zum Plotten der Punkte müssen wir `data` und `aes()` an `geom_point()`, **nicht** an `ggplot()`, übergeben (sonst bekommen wir gruppenspezifische Regressionsgeraden).

Wir markieren die Daten der Küken farblich nach ihrer Zugehörigkeit zur Futtergruppe (`Diet`). 

Das machen wir mit dem Parameter `col`, welchen wir in `geom_point(aes())` spezifizieren.


::: {.cell}

```{.r .cell-code}
# Koordinatensystem mit farblich verschiedenen Punkten für Diet:
ggplot() + geom_point(data=ChickWeight, aes(x=Time, y=weight, col=Diet)) + 
  # Regressionsgerade für weight ~ Time
  geom_smooth(method = 'lm')
```

::: {.cell-output-display}
![](Grafiken_files/figure-html/reg line and scatter and color-1.png){width=672}
:::
:::

::: {.cell}

```{.r .cell-code}
# Koordinatensystem mit farblich verschiedenen Punkten für Diet:
ggplot() + geom_point(data=ChickWeight, aes(x=Time, y=weight, col=Diet)) + 
  # Regressionsgerade für weight ~ Time
  stat_smooth(data=ChickWeight, aes(x=Time, y=weight), method = 'lm')
```

::: {.cell-output .cell-output-stderr}

```
`geom_smooth()` using formula = 'y ~ x'
```


:::

::: {.cell-output-display}
![](Grafiken_files/figure-html/unnamed-chunk-43-1.png){width=672}
:::
:::

</details>


##### Regressionsgerade eines multiplen linearen Regressionsmodells

Dafür nehmen wir `Diet` als weiteren Prädiktor auf.

Um die Ergebnisse einer multiplen linearen Regression zu visualisieren, können wir zwei verschiedene Möglichkeiten nutzen: 

a) gruppenspezifischen Regressionsgeraden in *ein Diagramm* einzuzeichnen
b) *eigene Diagramme* für jede Gruppe erstellen 

<i class="fa fa-exclamation-triangle fa-2x"></i> Diese zwei Möglichkeiten können wir nur bei <span class ="highlight">zwei Prädiktoren nutzen. Außerdem sind sie nur dann sinnvoll, wenn **eine Variable metrisch** (z.B. `weight`) **und eine kategorial** (z.B. `Diet`) ist. Bei zwei metrischen Variablen könnte eine der metrischen Variablen zu Darstellungszwecken in Gruppen (z.B. Quantile) aufgeteilt werden.


###### a) Gruppenspezifische Regressionsgeraden in einem Diagramm

Wenn wir `ggplot()` den Datensatz via `data` und die relevanten Variablen via `aes(x, y, col)` übergeben, und `+ geom_smooth(method='lm')` ergänzen, werden **gruppenspezifische Regressionsgeraden, für die Gruppierungsvariable, die in `col` spezifiziert** wurde, erstellt. `col` sorgt außerdem dafür, dass die Datenpunkte entsprechend ihrer Gruppenzugehörigkeit farblich unterschiedlich dargestellt werden.

<aside>Mehr zu `col` und generell der Nutzung von Farben in **ggplot2** erfahren wir im Abschnitt [Farbe](#farbe).</aside>


::: {.cell}

```{.r .cell-code}
ggplot(data=ChickWeight, aes(x=Time, y=weight, col=Diet)) + 
  geom_point() +
  geom_smooth(method='lm')
```

::: {.cell-output .cell-output-stderr}

```
`geom_smooth()` using formula = 'y ~ x'
```


:::

::: {.cell-output-display}
![](Grafiken_files/figure-html/unnamed-chunk-44-1.png){width=672}
:::
:::



###### b) Eigene Diagramme für jede Gruppe

Eigene Diagramme für jede Gruppe können mit `facet_wrap(~)` erstellt werden. Dieser Funktion übergeben wir die Variable (hier: `Diet`), nach deren Gruppierungen die Diagramme eingeteilt werden sollen. 

<aside>Mehr zu "Facetten" erfahren wir im [gleichnamigen Abschnitt](#facetten-facet-grids) und auf dem <a href="https://github.com/rstudio/cheatsheets/raw/master/translations/german/ggplot2-german.pdf" target="_blank">Cheat Sheet</a>.</aside>

Die Kombination von `geom_smooth(method="lm") + facet_wrap()` sorgt dafür, dass **für jede Gruppe der Variablen, die in `facet_wrap()` spezifiziert wird, eine eigene Regression gerechnet** wird.


::: {.cell}

```{.r .cell-code}
ggplot(data=ChickWeight, aes(x=Time, y=weight)) + 
  geom_point() + 
  geom_smooth(method="lm") + 
  facet_wrap(~Diet)
```

::: {.cell-output .cell-output-stderr}

```
`geom_smooth()` using formula = 'y ~ x'
```


:::

::: {.cell-output-display}
![](Grafiken_files/figure-html/reg b-1.png){width=672}
:::
:::


Dadurch, dass für jede Gruppe ein eigenes Streudiagramm nur mit den Beobachtungen in dieser Gruppe erstellt wird, können wir *indirekt* auch die **Interaktion** zwischen den zwei Prädiktoren (`Time` und `Diet`) sehen (d.h. die Intercepts und Slopes unterscheiden sich).

-->
<details>
<summary>
Paket ggiraphextra: Interaktive Plots und weitere Darstellungen von Regressionsmodellen
</summary>
<p>Mit der Funktion <code>ggPredict()</code> aus dem Paket <strong>ggiraphExtra</strong> können wir interaktive Streudiagramme mit Regressionsgeraden (von einfachen <em>und</em> multiplen linearen Regressionsmodellen) erstellen. Hierfür benötigen wir die Basisfunktion <code>ggplot()</code> gar nicht (aber ggiraphExtra baut auf ggplot2 auf). Allerdings müssen wir zuerst manuell mit <code>lm()</code> die Regression rechnen und das Ergebnisobjekt an <code>ggPredict()</code> übergeben.</p>
<p>Im Folgenden schauen wir uns an, wie wir interaktive Streudiagramme mit einer Regressionsgeraden (eines einfachen linearen Regressionsmodells) erstellen können.</p>
<p>Weitere Hilfe zu <code>ggPredict()</code>, z.B. wie wir gruppenspezifische Ergebnisse einer multiplen linearen Regression mit Interaktion oder einer <strong>logistischen Regression</strong> visualisieren können, findet wir <a href="https://cran.r-project.org/web/packages/ggiraphExtra/vignettes/ggPredict.html" target="_blank">hier</a>.</p>
<p>Interaktiv bedeutet, dass wir in den Plot reinzoomen, uns die Funktion der Regressionsgerade sowie die ID und die Prädiktor- und Kriteriumswerte der Personen anzeigen lassen können. Um den Plot interaktiv zu machen, müssen wir <code>interactive=TRUE</code> festlegen.</p>
<p>Auch hier können wir ein 95%-iges Konfidenzintervall um die Regressionsgerade legen, indem wir <code>se=TRUE</code> spezifizieren. Per Default ist hier (im Gegensatz zu <code>geom_smooth</code>) <em>kein</em> Konfidenzintervall eingezeichnet. Die Visualisierung der (Un)Genauigkeit unseres Regressionsmodells ist allerdings zu empfehlen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("ggiraphExtra", dependencies=TRUE)</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression rechnen:</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>reg_ggP <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">formula =</span> weight <span class="sc">~</span> Time, <span class="at">data =</span> ChickWeight)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ergebnisobjekt plotten</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraphExtra)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggPredict</span>(reg_ggP, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">interactive =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Leider ist die Nutzung von <code>ggPredict()</code> teilweise noch fehleranfällig, weil von <code>ggiraphExtra</code> erst eine Beta-Version vorliegt (Stand: Version 0.2.9). Es kann u.a. zu Problemen kommen, wenn man ordinalskalierte (<em>ordered factors</em>) oder nominalskalierte Variablen (<em>factors</em>) ins Modell aufnimmt. Trotzdem ist das interaktive Streudiagramm ein sinnvolles Feature, z.B. für Ergebnispräsentation in html-Dokumenten. Man sollte die Weiterentwicklung des Pakets <strong>ggiraphExtra</strong> also verfolgen.</p>
</blockquote>
</details>
</section>
</section>
</section>
<section id="mehr-als-zwei-variablen" class="level2 page-columns page-full" data-number="20.5">
<h2 data-number="20.5" class="anchored" data-anchor-id="mehr-als-zwei-variablen"><span class="header-section-number">20.5</span> Mehr als zwei Variablen</h2>
<p>Wie wir bis hier gesehen haben, können wir bis zu zwei Variablen sehr gut in einer Grafik visualisieren. Wenn wir aber mehr (kategoriale) Variablen aufnehmen wollen, müssen wir darauf achten, dass die zusätzlichen Informationen nicht zu Lasten der Verständlichkeit der Grafik sind.</p>
<p>Mit <strong>Facetten</strong> erstellen wir eine Matrix aus (Unter)Grafiken einer Art für verschiedene Gruppen. Mit einem <strong>Alluvial Plot</strong> können wir die Häufigkeiten der Zugehörigkeit zu verschiedenen Gruppen visualisieren.</p>
<p>Beide Grafiken können genutzt werden, wenn wir Variablen visualisieren wollen, von denen mindestens eine kategorial ist. Wir können mit ihnen mehr als drei Variablen visualisieren, wenn alle (Alluvial Plot) bzw. alle bis auf maximal zwei (Facetten Plots) Variablen kategorial sind. Werte kontinuierliche Variablen können wir auch in Kategorien einteilen um sie hier zu nutzen.</p>
<p>Im Folgenden nutzen wir auch den Datensatz <strong>mpg</strong>, weil dieser mehr kategoriale Varialen enhält als <strong>ChickWeight</strong>.</p>
<section id="mindestens-eine-kategoriale-variable" class="level3 page-columns page-full" data-number="20.5.1">
<h3 data-number="20.5.1" class="anchored" data-anchor-id="mindestens-eine-kategoriale-variable"><span class="header-section-number">20.5.1</span> Mindestens eine kategoriale Variable</h3>
<section id="facetten-facet-grids" class="level4 page-columns page-full" data-number="20.5.1.1">
<h4 data-number="20.5.1.1" class="anchored" data-anchor-id="facetten-facet-grids"><span class="header-section-number">20.5.1.1</span> <strong>Facetten</strong> (Facet Grids)</h4>
<p>Wenn wir uns eine Art von Grafik (z.B. Streudiagramm) in Abhängigkeit einer kategorialen Variablen (d.h. für verschiedene Gruppen) separat anschauen wollen, können wir <code>+ facet_grid()</code> nutzen. Mit dieser Funktion bekommen wir “Facetten”, d.h. (Unter)Grafiken für jede Ausprägung der kategorialen Variablen.</p>
<p>Wir können außerdem entscheiden, wie die Facetten angeordnet sein sollen:</p>
<ul>
<li><code>facet_grid(Variable ~ .)</code><br>
Die Variable wird <strong>zeilenweise</strong> angeordnet, indem wir sie vor die Tilde schreiben <em>und</em> einen Punkt dahinter setzen.</li>
<li><code>facet_grid( ~ Variable)</code><br>
Die Variable wird <strong>spaltennweise</strong> angeordnet, indem wir sie nach der Tilde schreiben.</li>
</ul>
<aside>
Die Anordnung von Zeile und Spalte in <code>facet_grid()</code> ist analog zum Indexieren von zweidimensionalen Datenstrukturen (z.B. Matrizen, Dataframes): <strong>Z</strong>uerst die <strong>Z</strong>eile, dann die Spalte.
</aside>
<p>Wir schauen uns die Gewichtszunahme (<code>weight</code>) über die Zeit (<code>Time</code>) getrennt für die einzelnen Experimentalgruppen (<code>Diet</code>) an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Diet <span class="sc">~</span> .) <span class="co"># Zeilen</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>( <span class="sc">~</span> Diet) <span class="co"># Spalten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-47-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Wir können auch Facetten für <strong>mehrere</strong> kategoriale Variablen erstellen. Das Produkt der Anzahl der Ausprägungen der Variablen gibt die Menge der (Unter)Grafiken an (z.B. drei Variablen mit jeweils zwei Ausprägungen: 2 x 2 x 2 = 8 Grafiken). Wenn wir mehr als zwei Variablen haben, werden Variablen, die zusammen in einer Zeile bzw. einer Spalte gestaffelt werden, mit einem <code>+</code> verbunden. Damit die einzelnen Grafiken aber noch übersichtlich bleiben, sollten wir ihre Anzahl tendenziell gering halten.</p>
<p>Wir schauen uns aus dem Datensatz <strong>mpg</strong> Histogramme des Hubraums (<code>displ</code>) der Autos an. Die Histogramme sind nach Jahr (<code>year</code>), Antrieb (<code>drv</code>) und Brennstofftrieb (<code>fl</code>) gestaffelt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mpg, <span class="fu">aes</span>(<span class="at">x=</span>displ)) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(fl <span class="sc">~</span> year <span class="sc">+</span> drv) <span class="co"># Zeilen ~ Spalten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
Idealerweise würde man vor der Verarbeitung nominal- und ordinalskalierte Variablen, die als numerische Vektoren vorliegen (wie <code>drv</code> und <code>fl</code>), noch faktorisieren. Mehr dazu auch im Kapitel zu <a href="./Datenvorbereitung.html">Datenvorbereitung</a>
</aside>
<p>Weitere Informationen zu <code>facet_grid()</code>, z.B. wie man hier die Achsengrenzen und -beschriftung anpassen kann, befinden sich auf dem <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/translations/german/data-visualization_de.pdf" target="_blank">Cheat Sheet</a>.</p>
<p>Mehr Informationen dazu, wie wir nur Plots für <em>einige</em> Gruppen erstellen, erhalten wir <a href="./Grafiken.html#grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen">später</a>.</p>
</section>
</section>
<section id="nur-kategoriale-variablen" class="level3 page-columns page-full" data-number="20.5.2">
<h3 data-number="20.5.2" class="anchored" data-anchor-id="nur-kategoriale-variablen"><span class="header-section-number">20.5.2</span> Nur kategoriale Variablen</h3>
<section id="alluvial-plot" class="level4 page-columns page-full" data-number="20.5.2.1">
<h4 data-number="20.5.2.1" class="anchored" data-anchor-id="alluvial-plot"><span class="header-section-number">20.5.2.1</span> Alluvial Plot</h4>
<p>Alluvial Plots sind eine <strong>Art von Flussdiagrammen</strong>, die die Zugehörigkeit zu <em>mehreren</em> Gruppierungen visualisieren. Sie stellen somit auch eine <strong>grafische Alternative zu Kontingenztabellen</strong> dar.</p>
<p>Wir wollen das Gewicht der Küken zum ersten und letzten Messzeitpunkt (<code>Time</code>) in Abhängigkeit der Fütterung (<code>Diet</code>) visualisieren. Dazu werden wir die Werte der metrischen Variablen <code>weight</code> in zwei Gruppen aufteilen: größer bzw. kleiner als der Mittelwert.</p>
<p><strong>Für die Visualisierung längsschittlicher Daten müssen wir die folgenden Schritte durchlaufen:</strong> Zuerst wählen wir die relevanten Fälle, d.h. jene zum ersten und letzten Messzeitpunkt, aus und speichern sie in einem neuen Dataframe (<em>optional</em>; nur wenn wir nicht alle Zeitpunkte visualisieren wollen). Diesen wandeln wir dann ins Wide-Format um. Danach erstellen wir eine neue Variable, die kodiert, ob das Gewicht eines Kükens zu einem gewissen Zeitpunkt kleiner oder größer als der Mittelwert ist. Zuletzt entfernen die nicht länger benötigten Variablen aus dem Dataframe.</p>
<aside>
Diese Schritte werden im folgenden nur knapp erklärt. Mehr Hilfe finden wir im Kapitel zu <a href="./Datenvorbereitung.html">Datenvorbereitung</a> in den Abschnitten <strong>Daten extrahieren</strong> und <strong>Kodierung ändern</strong>.
</aside>
<!-- Problem mit WL-Formatierung und Markdown:
- Mac: läuft in Konsole, aber nicht in Rmd, daher eval=F gesetzt und Datei ex- und importiert
- Linux: Code Chunk läuft nicht in Konsole (und wahrscheinlich auch nicht in Rmd-->
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># neuer Datensatz nur mit Werten von erster und letzter Messung:</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>copy <span class="ot">&lt;-</span> <span class="fu">filter</span>(ChickWeight, Time <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> Time <span class="sc">==</span> <span class="dv">21</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ins Wide-Format bringen:</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>cont_Chick <span class="ot">&lt;-</span> <span class="fu">spread</span>(copy, <span class="at">key=</span><span class="st">"Time"</span>, <span class="at">value=</span><span class="st">"weight"</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Die Variablen 0 und 21 wurden erzeugt. Diese müssen wir bei der Indexierung </span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># immer mit ".." umschließen, da sie sonst nicht als solche erkannt werden.</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co"># für beide Messzeitpunkte eine neue Variable erstellen:</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>cont_Chick<span class="sc">$</span>t0 <span class="ot">&lt;-</span> <span class="fu">case_when</span>(cont_Chick<span class="sc">$</span><span class="st">"0"</span> <span class="sc">&lt;</span> <span class="fu">mean</span>(cont_Chick<span class="sc">$</span><span class="st">"0"</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"kleiner"</span>,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>                           cont_Chick<span class="sc">$</span><span class="st">"0"</span> <span class="sc">&gt;</span> <span class="fu">mean</span>(cont_Chick<span class="sc">$</span><span class="st">"0"</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"größer"</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>cont_Chick<span class="sc">$</span>t21 <span class="ot">&lt;-</span> <span class="fu">case_when</span>(cont_Chick<span class="sc">$</span><span class="st">"21"</span> <span class="sc">&lt;</span> <span class="fu">mean</span>(cont_Chick<span class="sc">$</span><span class="st">"21"</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"kleiner"</span>,</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>                           cont_Chick<span class="sc">$</span><span class="st">"21"</span> <span class="sc">&gt;</span> <span class="fu">mean</span>(cont_Chick<span class="sc">$</span><span class="st">"21"</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"größer"</span>)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="co"># nicht mehr benötigte Variablen raus:</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>cont_Chick <span class="ot">&lt;-</span> <span class="fu">select</span>(cont_Chick, <span class="sc">-</span><span class="st">"0"</span>, <span class="sc">-</span><span class="st">"21"</span>, <span class="sc">-</span>Chick)</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Die ID-Variable "Chick" benötigen wir nicht mehr und sie würde uns die</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># im Anschluss erstellte Kontingenztabelle unnötig erweitern.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Für jeden Alluvial Plot (egal ob längsschnittliche oder querschnittliche Daten genutzt wurden) müssen wir die Daten in eine Kontingenztabelle überführen (damit die Häufigkeiten der Gruppierungskombinationen explizit in einer neuen Spalte gespeichert werden) und anschließend wieder in einen Dataframe umwandeln.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kontingenztabelle erstellen</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>cont_Chick <span class="ot">&lt;-</span> <span class="fu">table</span>(cont_Chick)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># in Dataframe umwandeln</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>cont_Chick <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(cont_Chick)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um besser zu verstehen, warum das sein muss, können wir uns den Datensatz vor und nach der Umwandlung anschauen.<br>
</p>
<details>
<summary>
Vergleich unseres Dataframes vor und nach der Umwandlung
</summary>
<p>Vor der Umwandlung steht jede <strong>Zeile</strong> für eine <strong>Beobachtung</strong> (d.h. ein Küken).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">Diet</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">t0</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">t21</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="20" style="text-align: right; vertical-align: middle !important;">1</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td rowspan="10" style="text-align: right; vertical-align: middle !important;">2</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="odd">
<td rowspan="10" style="text-align: right; vertical-align: middle !important;">3</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td rowspan="10" style="text-align: right; vertical-align: middle !important;">4</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">größer</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
<tr class="even">
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Nach der Umwandlung (in eine Kontingenztabelle und wieder zurück in einen Dataframe) steht in jeder <strong>Zeile</strong> eine <strong>Kombination</strong> (welche Futtergruppe <code>Diet</code> und jeweils kleiner oder größer zum ersten und zum zweiten Messzeitpunkt) und die <strong>Anzahl der Beobachtungen</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">Diet</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">t0</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">t21</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; color: white !important; background-color: rgba(0, 145, 147, 255) !important;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">größer</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">größer</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: left;">kleiner</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</details>
<p>Bevor wir den Alluvial Plot erstellen, laden wir das benötigte Paket <strong>ggalluvial</strong> und überprüfen, ob unser neu erstellter Dataframe auch wirklich im korrekten Alluvial Format vorliegt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalluvial)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is_alluvia_form</span>(cont_Chick)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Es ist zu empfehlen, den nachfolgenden Code für die eigenen Daten größtenteils zu kopieren. Lediglich in Zeilen (a) und (d) müssen die Argumente von <code>fill</code> bzw. <code>limit</code> angepasst werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>cont_Chick, <span class="fu">aes</span>(<span class="at">y=</span>Freq, <span class="at">axis1=</span>t0, <span class="at">axis2=</span>t21)) <span class="sc">+</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (a) grundlegender Alluvial Plot:</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Diet)) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (b) Balken zur Visualisierung der Häufigkeiten in t0 und t21:</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">fill=</span><span class="st">"white"</span>, <span class="at">width=</span><span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (c) Einfügen der Gruppennamen von t0 und t21:</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label=</span><span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (d) Einfügen bzw. Ändern der Benennung der Variablen t0 und 21:</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"erste Messung"</span>, <span class="st">"letzte Messung"</span>),</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (e) Verringern der Fläche außerhalb der (äußersten) Strata:</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">expand =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">05</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in to_lodes_form(data = data, axes = axis_ind, discern =
params$discern): Some strata appear at multiple axes.
Warning in to_lodes_form(data = data, axes = axis_ind, discern =
params$discern): Some strata appear at multiple axes.
Warning in to_lodes_form(data = data, axes = axis_ind, discern =
params$discern): Some strata appear at multiple axes.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Um den Plot (und den Code) besser zu verstehen, werden wir noch einige wichtige Begriffe erläutern:</p>
<ul>
<li><strong>axis</strong>: vertikale Dimension einer Variablen auf der x-Achse (weiße Balken von <code>t0</code> und <code>t21</code>)</li>
<li><strong>stratum</strong>: Gruppierung von axis (für <code>t0</code> und <code>t21</code> jeweils <code>größer</code> und <code>kleiner</code>)</li>
<li><strong>alluvium</strong>: horizontale “Strömungen” im Hintergrund, die die kombinierten Gruppenzugehörigkeiten beschrieben (z.B. <em>größer</em> zur <em>ersten Messung</em> und <em>kleiner</em> zur <em>letzten Messung</em>) und nach einer weiteren Gruppe farblich kodiert sind (<code>Diet</code>)</li>
</ul>
<p>Die verschiedenen Strata zeigen uns, wie groß die Anteile an Küken sind, die ihr Gewicht gehalten oder verändert haben (jeweils im Vergleich zum Mittelwert zum jeweiligen Zeitpunkt). Wir können auch vergleichen, ob sich die Trends in den Gruppen von <code>Diet</code> unterscheiden z.B. hat Gruppe 3 den größten Zuwachs bekommen (erste Messung: kleiner; letzte Messung: größer).</p>
<p>Mehr Informationen und weitere Beispiele für Alluvial Plots finden wir auch in der <a href="https://cran.r-project.org/web/packages/ggalluvial/vignettes/ggalluvial.html" target="_blank">Dokumentation des Pakets</a>.</p>
<p>Im folgenden Abschnitt werden noch weitere Erweiterungen vorgestellt z.B. wie wir einen Titel und andee Achsenbeschriftungen einfügen können.</p>
</section>
</section>
</section>
<section id="modifikationen" class="level2 page-columns page-full" data-number="20.6">
<h2 data-number="20.6" class="anchored" data-anchor-id="modifikationen"><span class="header-section-number">20.6</span> Modifikationen</h2>
<p>Nachfolgend schauen wir uns einige Möglichkeiten der Modifikation von Grafiken an. Als Beispiele nutzen wir dafür die bisher erstellten Grafiken.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Wenn wir in der R-Dokumentation nach <strong>ggplot2-specs</strong> suchen, finden wir eine Übersicht der ästhetischen Spezifikationen wie z.B. <strong>Farben</strong>, <strong>Linientypen</strong>, <strong>Punktformen</strong>, <strong>Schriftarten</strong>, <strong>Textausrichtung</strong> etc.</p>
</blockquote>
<section id="farbe" class="level3 page-columns page-full" data-number="20.6.1">
<h3 data-number="20.6.1" class="anchored" data-anchor-id="farbe"><span class="header-section-number">20.6.1</span> Farbe</h3>
<p>Nachfolgend schauen wir an, wie wir bestimmte Elemente bzw. Teile von Elementen einer Grafik farblich hervorheben können und welche Möglichkeiten es gibt (einzelne) Farben und Farbpaletten zu nutzen.</p>
<p>Um unsere Farbwahl auch für Menschen mit verschiedenen Sehschwächen geeignet zu gestalten, können wir verschiedene Farbwahrnehmungen mit <a href="https://www.color-blindness.com/coblis-color-blindness-simulator/" target="_blank"><strong>Coblis</strong></a> simulieren.</p>
<section id="grundlegendes" class="level4 page-columns page-full" data-number="20.6.1.1">
<h4 data-number="20.6.1.1" class="anchored" data-anchor-id="grundlegendes"><span class="header-section-number">20.6.1.1</span> Grundlegendes</h4>
<p>Es gibt zwei Parameter, mit denen wir jeweils festlegen können, ob Elemente <strong>farblich umrandet und/oder komplett ausgefüllt</strong> werden sollen.</p>
<ul>
<li><code>col</code>, <code>color</code> oder <code>colour</code>: farbliche <strong>Umrandung</strong> eines Elements<br>
In verschiedenen Funktionen ist das Argument zur farblichen Umrandung unterschiedlich benannt (d.h. <code>col</code>, <code>color</code> oder <code>colour</code>). Es gibt aber auch viele Funktionen, in denen alle Parameter funktionieren (und dasselbe bewirken). Genauere Informationen erhalten wir in der Dokumentation der jeweiligen Funktion.</li>
<li><code>fill</code>: farbliche <strong>Füllung</strong> eines Elements</li>
</ul>
<p>Weil <code>col</code> und <code>fill</code> separate Parameter sind, können wir auch beide gleichzeitig nutzen, um sowohl die Umrandung als auch die Ausfüllung eines Elements (geom) verschieden einzufärben.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Allerdings gibt es Elemente (geoms), die davon ausgenommen sind. Bei <strong>Linien</strong> (z.B. <code>geom_line()</code>) und <strong>Text</strong> (z.B. <code>geom_text()</code>) können wir <strong>nur <code>col</code></strong> nutzen. Bei <strong>Punkten</strong> (z.B. <code>geom_point()</code>) gibt es einige Formen (<strong>21-24</strong>, siehe unten), die <strong><code>col</code> <em>und</em> <code>fill</code></strong> nutzen können. Alle anderen Formen können auch <strong>nur <code>col</code></strong> nutzen. Die Punktform legen wir mit dem Argument <code>shape</code> fest.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">23</span>, <span class="at">fill=</span><span class="st">"red"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/point fill and col-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<p><br>
Abbildung aus der Dokumentation von “ggplot2-specs”<br>
</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/points.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</aside>
<p>Zusäzlich können wir <strong>zwei Farbmodi</strong> unterscheiden:</p>
<ul>
<li>statische Farben
<ul>
<li>gelten für alle (spezifizierten) Elemente</li>
<li><strong>außerhalb</strong> von <code>aes()</code></li>
</ul></li>
<li>variable Farben
<ul>
<li>unterschiedliche Farben für verschiedene Ausprägungen einer Variablen</li>
<li>es wird automatisch eine Legende erstellt</li>
<li><strong>innerhalb</strong> von <code>aes()</code></li>
</ul></li>
</ul>
<!--(nur für built-in Farben)-->
<!-- - in spezifischen Funktionen (z.B. `scale_color_discrete()` bzw. `scale_fill_discrete()`) für zusätzliche Farben -->
<p>Nachfolgend finden wir eine Übersicht, in der die jeweiligen Unterschiede zwischen <code>col</code> und <code>fill</code> sowie statischen und variablen Farben verdeutlicht werden sollen. Der Code zur Erstellung der jeweiligen Grafik befindet sich über den Abbildungen.</p>
<table class="r-table">
<tbody><tr>
<th width="20%">
</th>
<th width="40%">
statisch
</th>
<th width="40%">
Variablenausprägung
</th>
</tr>
<tr>
<th width="20%">
fill
</th>
<td width="40%">
<img src="figures/ggplot2/Bilder/static fill.png" class="img-fluid">
</td>
<td width="40%">
<img src="figures/ggplot2/Bilder/variable fill.png" class="img-fluid">
</td>
</tr>
<tr>
<th width="20%">
col
</th>
<td width="40%">
<img src="figures/ggplot2/Bilder/static col.png" class="img-fluid">
</td>
<td width="40%">
<img src="figures/ggplot2/Bilder/variable col.png" class="img-fluid">
</td>
</tr>
</tbody></table>
</section>
<section id="einzelne-farben" class="level4" data-number="20.6.1.2">
<h4 data-number="20.6.1.2" class="anchored" data-anchor-id="einzelne-farben"><span class="header-section-number">20.6.1.2</span> (Einzelne) Farben</h4>
<p>Wir können in R standardmäßig implementierte (“built-in”) Farben sowie Hex-Farben nutzen.</p>
<p>Auf dieser <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" target="_blank">Seite</a> finden wir eine Übersicht der built-in Farben. Diese können wir einfach mit ihrem Namen auswählen z.B. <code>"red"</code> oder <code>"seagreen1"</code>.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Diese built-in Farben sind nicht mit allen Anwendungen in R kompatibel. Beispielsweise können wir <code>"seagreen"</code>, aber <strong>nicht</strong> <code>"seagreen1"</code> in der Funktion <code>kable()</code> aus dem Paket <strong>knitr</strong>, welche eine Tabelle erstellt, nutzen.</p>
</blockquote>
<p>Darüber hinaus können wir auch Hex-Farben (mit dem Hexadezimal-Zahlensystem kodierte Faben) nutzen, die aus einem <strong>#</strong> und einer 6-stelligen Zeichenfolge bestehen, z.B. <code>"#53FD9F"</code>. Dabei werden jeweils zwei Zahlen genutzt um rot, blau und grün zu kodieren (<strong>RGB</strong>). Beispielsweise können wir <a href="http://hslpicker.com" target="_blank">hier</a> eigene Farben erstellen und uns den Hex-Code kopieren.</p>
<details>
<summary>
Grafische Elemente transparent machen
</summary>
<p>Wir können einzelne Elemente einer Grafik transparent machen. Wenn wir die Grafik exportieren wollen, müssen wir nicht nur in der Erstellung der Grafik sondern auch beim Export angeben, dass ein bestimmtes Element transparent sein soll. Nur Grafiken im <strong>PNG</strong>-Format können transparent sein.</p>
<p>Folgendermaßen können wir beispielsweise den <strong>Hintergrund der Grafik</strong> (<code>plot.background</code>) transparent machen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">8</span>,], <span class="fu">aes</span>(Diet, weight)) <span class="sc">+</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>)) <span class="co"># Erstellung</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"Grafik_transp.png"</span>, <span class="at">bg =</span> <span class="st">"transparent"</span>) <span class="co"># Export</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/Grafik_transp.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<p>Um zu sehen, dass die sonst weiße Hintergrundfläche der Grafik nun transparent ist, müssten wir die Grafik runterladen, weil der Hintegrund hier auch weiß ist.</p>
</details>
</section>
<section id="farbpaletten" class="level4" data-number="20.6.1.3">
<h4 data-number="20.6.1.3" class="anchored" data-anchor-id="farbpaletten"><span class="header-section-number">20.6.1.3</span> Farbpaletten</h4>
<p>Es ist zu empfehlen bei der farblichen Kodierung von Variablenausprägungen auf Farbpaletten zurückgreifen, da diese bereits gut durchdachte Farbkombinationen enthalten. Die Idee dahinter ist bei kategorialen Variablen verschiedene Farben und bei metrischen Variablen ähnliche Farben für ähnliche Ausprägungen zu nutzen.</p>
<p>Neben den voreingestellten Farbpaletten, die wir automatisch nutzen, wenn wir <code>col</code> oder <code>fill</code> innerhalb von <code>aes()</code> spezifizieren, können wir auch weitere Farbpaletten nutzen.</p>
<!-- **Übrigens**: Die voreingestellten Farbpaletten kommen aus den Funktionen `scale_fill_hue()` (kategorial) und `scale_colour_hue()` (metrisch). -->
<p>Auf <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3" target="_blank"><strong>colorbrewer2.org</strong></a> finden wir jeweils angemessene Farbkombinationen zur Kodierung von kategorialen Daten. Teilweise sind diese Farbpaletten bereits in ggplot2 implementiert z.B. in der Funktion <code>scale_colour_brewer()</code> bzw. <code>scale_fill_brewer()</code>, mit der wir Farbanpassungen vornehmen können.</p>
<p>Für kategoriale Daten ist <code>type="qual"</code> <em>(qualitative)</em> am besten geeignet, da es Paletten mit sehr unterschiedliche Farben nutzt. Es gibt noch <code>"seq"</code> <em>(sequential)</em> und <code>"div"</code> <em>(diverging)</em>, mit denen wir eine Reihenfolge bzw. eine Grenze farblich darstellen können. Für mehr Informationen lohnt es sich auf der <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3" target="_blank">Webseite</a> nachzuschauen. Dort sehen wir z.B. auch die verschiedenen Paletten, die wir mit dem Parameter <code>palette</code> ändern können.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">8</span>,], <span class="fu">aes</span>(Diet, weight)) <span class="sc">+</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>Diet)) <span class="sc">+</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">type=</span><span class="st">"qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="legenden-modifizieren" class="level3" data-number="20.6.2">
<h3 data-number="20.6.2" class="anchored" data-anchor-id="legenden-modifizieren"><span class="header-section-number">20.6.2</span> Legenden modifizieren</h3>
<p>Wenn wir Farben, Punktformen o.ä. auf Variablen(ausprägungen) anwenden (d.h. diese <strong>in</strong> <code>aes()</code> spezifizieren), wird <strong>automatisch</strong> eine Legende erstellt.</p>
<p>Es gibt verschiedene Aspekte von Legenden, die wir ändern können. Im Folgenden schauen wir uns <strong>Text</strong> und <strong>Positionierung</strong> an. Weitere Modifikationen finden wir <a href="http://www.sthda.com/english/wiki/ggplot2-legend-easy-steps-to-change-the-position-and-the-appearance-of-a-graph-legend-in-r-software#change-the-legend-title-and-text-font-styles" target="_blank">hier</a>.</p>
<section id="text" class="level4" data-number="20.6.2.1">
<h4 data-number="20.6.2.1" class="anchored" data-anchor-id="text"><span class="header-section-number">20.6.2.1</span> Text</h4>
<p>Wir können sowohl den Titel als auch die einzelnen Elemente einer Legende anders benennen.</p>
<p>Wenn es sich um eine kategoriale Variable handelt, die wir mit <code>fill</code> farblich kodiert haben, können wir die Änderungen mit <code>scale_fill_discrete(name, labels)</code> vornehmen.</p>
<p>Dem Parameter <code>name</code> übergeben wir den Titel der Legende, <code>labels</code> einen Vektor mit den Namen der Bezeichnung der Ausprägungen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Diet)) <span class="sc">+</span>                <span class="co"># fill ...</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Fütterung"</span>,     <span class="co"># ... deswegen _fill_</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Diät 1"</span>, <span class="st">"Diät 2"</span>, </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Diät 3"</span>, <span class="st">"Diät 4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/legend renaming-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Analog dazu nutzen wir <code>scale_color_discrete()</code>, wenn wir das Argument <code>color</code> (zur farblichen Umrandung) genutzt haben.</p>
<p>Wenn wir eine metrische Variable farblich kodiert haben, nutzen wir <code>scale_fill_continuous</code> bzw. <code>scale_colour_continuous ()</code>.</p>
</section>
<section id="position" class="level4" data-number="20.6.2.2">
<h4 data-number="20.6.2.2" class="anchored" data-anchor-id="position"><span class="header-section-number">20.6.2.2</span> Position</h4>
<p>Die Position der Legende können wir mit <code>theme(legend.position)</code> ändern. Wir können zwischen oben (<code>"top"</code>), unten (<code>"bottom"</code>), links (<code>"left"</code>) und rechts (<code>"right"</code>) wählen. Mit <code>"none"</code> können wir die Legende entfernen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span> <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Diet)) <span class="sc">+</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/legend position-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="beschriftung" class="level3" data-number="20.6.3">
<h3 data-number="20.6.3" class="anchored" data-anchor-id="beschriftung"><span class="header-section-number">20.6.3</span> Beschriftung</h3>
<p>Im Folgenden schauen wir uns an, wie wir Titel und Achsenbeschriftung, sowie Beschriftungen in der Grafik ändern bzw. hinzufügen können.</p>
<section id="überschrift" class="level4" data-number="20.6.3.1">
<h4 data-number="20.6.3.1" class="anchored" data-anchor-id="überschrift"><span class="header-section-number">20.6.3.1</span> Überschrift</h4>
<p>Um dem Plot (nur) eine Überschrift zu verpassen nutzen wir <code>ggtitle()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Gewichtsveränderung über die Zeit"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="achsenbeschriftung" class="level4" data-number="20.6.3.2">
<h4 data-number="20.6.3.2" class="anchored" data-anchor-id="achsenbeschriftung"><span class="header-section-number">20.6.3.2</span> Achsenbeschriftung</h4>
<p>Wenn wir (nur) die Beschriftung der x- oder y-Achse ändern möchten (z.B. weil diese anders benannt werden sollen als die Variablen im Datensatz), können wir <code>xlab()</code> bzw. <code>ylab()</code> nutzen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Zeit in Tagen"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Gewicht in Gramm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="überschrift-achsenbeschriftung-und-bildunterschrift" class="level4" data-number="20.6.3.3">
<h4 data-number="20.6.3.3" class="anchored" data-anchor-id="überschrift-achsenbeschriftung-und-bildunterschrift"><span class="header-section-number">20.6.3.3</span> Überschrift, Achsenbeschriftung und Bildunterschrift</h4>
<p>Wir können sowohl eine Überschrift als auch Achsenbeschriftungen ergänzen, indem wir <code>labs(title, x, y)</code> nutzen. Außerdem können wir der Grafik mit <code>caption</code> noch eine Bildunterschrift verpassen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span><span class="st">"Gewichtsveränderung über die Zeit"</span>, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Zeit in Tagen"</span>, <span class="at">y =</span> <span class="st">"Gewicht in Gramm"</span>, <span class="at">caption=</span><span class="st">"Weitere Notizen"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/title and labs-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="beschriftung-in-der-grafik" class="level3" data-number="20.6.4">
<h3 data-number="20.6.4" class="anchored" data-anchor-id="beschriftung-in-der-grafik"><span class="header-section-number">20.6.4</span> Beschriftung in der Grafik</h3>
<section id="ausprägung-von-variablen" class="level4" data-number="20.6.4.1">
<h4 data-number="20.6.4.1" class="anchored" data-anchor-id="ausprägung-von-variablen"><span class="header-section-number">20.6.4.1</span> Ausprägung von Variablen</h4>
<p>Mit <code>geom_text()</code> (Bsp. 1 und 2) oder <code>geom_label()</code> (Bsp. 3 und 4) können wir Ausprägungen einer Variablen als Text in unsere Grafik einfügen.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Allerdings können wir die Funktionen <strong>nicht</strong> bei <a href="#facetten-facet-grids">Facetten</a> anwenden.</p>
</blockquote>
<p>Beide Funktionen machen fast das Gleiche. Optisch unterscheiden sie sich dadurch, dass <code>geom_label()</code> den Text zusätzlich mit einem weißen Feld hinterlegt.</p>
<p>Unseren <strong>Text</strong> übergeben wir an <code>aes(label)</code>, welches sowohl in <code>ggplot()</code> (Bsp. 1 und 3), als auch in <code>geom_text()</code> bzw. <code>geom_label()</code> (Bsp. 2 und 4) spezifiziert werden kann.</p>
<p>Zusätzlich können wir die <strong>Ausrichtung</strong> des Texts anpassen. Dazu nutzen wir <code>hjust</code> (<strong>h</strong>orizontal) und <code>vjust</code> (<strong>v</strong>ertikale) (Bsp. 2 und 4), welchen wir einen Wert zwischen 0 und 1 übergeben (Default: <code>hjust=0.5</code> und <code>vjust=0.5</code>). Wir können auch Werte außerhalb von 0 bis 1 spezifizieren; allerdings wird in der Dokumentation davon abgeraten (ohne weitere Begründung; mehr Informationen dazu in der Dokumentation von <em>ggplot2-specs</em>).</p>
<p><strong>Beispiel 1 und 2</strong> zeigen die Gewichtsveränderung (x-Achse: <code>Time</code>, y-Achse: <code>weight</code>) über die Zeit von Küken 1 (<code>ChickWeight$Chick == 1</code>). Wir beschriften die Datenpunkte mit den jeweiligen Messzeitpunkten (<code>aes(label=Time)</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Chick <span class="sc">==</span> <span class="dv">1</span>,], </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight, <span class="at">label=</span>Time)) <span class="sc">+</span> </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>()</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Chick <span class="sc">==</span> <span class="dv">1</span>,], </span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Time), <span class="at">vjust=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-68-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p><strong>Beispiel 3 und 4</strong> zeigen die Gewichtsverteilung der Küken in den Futtergruppen (x-Achse: <code>Diet</code>, y-Achse: <code>weight</code>) zum letzten Messzeitpunkt (<code>Time 21</code>). Wir beschriften die Datenpunkte mit den jeweiligen Nummern der Küken (<code>aes(label=Chick)</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight, <span class="at">label=</span>Chick)) <span class="sc">+</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_label</span>()</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>Chick), <span class="at">hjust=</span><span class="fl">1.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-69-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Es gibt noch weitere Parameter, mit denen wir u.a. das Padding des Textes, die Rundung des Textfeldes, die Schriftgröße oder -farbe ändern können.</p>
<p>Weitere Hilfe zur Nutzung und Modifikation von <code>geom_text()</code> und <code>geom_label()</code> finden wir <a href="http://www.sthda.com/english/wiki/ggplot2-texts-add-text-annotations-to-a-graph-in-r-software" target="_blank">hier</a>.</p>
</section>
<section id="beliebiger-text-an-beliebiger-stelle" class="level4" data-number="20.6.4.2">
<h4 data-number="20.6.4.2" class="anchored" data-anchor-id="beliebiger-text-an-beliebiger-stelle"><span class="header-section-number">20.6.4.2</span> Beliebiger Text an beliebiger Stelle</h4>
<p>Wenn wir einen eigenen Text in eine Grafik schreiben wollen, können wir <code>annotate(geom = "text")</code> und <code>annotate(geom = "label")</code> nutzen. Analog zu den Funktionen im vorhergehenden Abschnitt sind beide <code>geom</code>-Optionen gleich, außer dass der Text bei <code>"label"</code> mit einem weißen Feld hinterlegt wird.</p>
<p>Anders als bei den Funktionen im vorhergehenden Abschnitt <em>müssen</em> wir eine Position festlegen (weil unser Text nicht zu bestehenden Datenpunkten gematcht wird). Dafür können wir <code>x</code> und <code>y</code> nutzen. Diese entsprechen den Maßen der Einheiten der jeweiligen Achsen.</p>
<p><strong>Beispiel 1</strong> zeigt die Gewichtsveränderung (x-Achse: <code>Time</code>, y-Achse: <code>weight</code>) über die Zeit von Küken 1 (<code>ChickWeight$Chick == 1</code>).</p>
<p><strong>Beispiel 2</strong> zeigt die Gewichtsverteilung der Küken in den Futtergruppen (x-Achse: <code>Diet</code>, y-Achse: <code>weight</code>) zum letzten Messzeitpunkt (<code>Time 21</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Chick <span class="sc">==</span> <span class="dv">1</span>,], </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">label=</span><span class="st">"Küken 1"</span>, <span class="at">x=</span><span class="dv">5</span>, <span class="at">y=</span><span class="dv">200</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">"label"</span>, <span class="at">label=</span><span class="st">"Messzeitpunkt 21"</span>, <span class="at">x=</span><span class="fl">1.7</span>, <span class="at">y=</span><span class="dv">370</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-70-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
<p>Wir können die Darstellung des Textes (wie im vorhergehenden Abschnitt) auch anpassen. Mehr Informationen dazu in der Dokumentation von <code>annotate()</code>.</p>
</section>
</section>
</section>
<section id="kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen" class="level2" data-number="20.7">
<h2 data-number="20.7" class="anchored" data-anchor-id="kategoriale-variablen-benennung-und-reihenfolge-der-ausprägungen"><span class="header-section-number">20.7</span> Kategoriale Variablen: Benennung und Reihenfolge der Ausprägungen</h2>
<section id="benennung" class="level3" data-number="20.7.1">
<h3 data-number="20.7.1" class="anchored" data-anchor-id="benennung"><span class="header-section-number">20.7.1</span> Benennung</h3>
<p>Der Einfachheit halber nutzen wir zur Kodierung von Gruppen häufig Zahlen, wie z.B. bei <code>Diet</code>: 1, 2, 3, 4. In einer Grafik hingegen ist es aber sinnvoller, Begriffe zu nutzen.</p>
<p>Mit <code>levels()</code> können wir uns nicht nur die verschiedenen Stufen eines Faktors ausgeben lassen. Wir können die Funktion außerdem nutzen, um die Benennung der Stufen zu ändern.</p>
<p>Im Folgenden ändern wir die Benennungen der Gruppen von <code>Diet</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>ChickWeight<span class="sc">$</span>Diet_name <span class="ot">&lt;-</span> ChickWeight<span class="sc">$</span>Diet <span class="co"># Kopie von `Diet` als neue Spalte</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(ChickWeight<span class="sc">$</span>Diet_name) <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">"Diät 1"</span>, <span class="st">"Diät 2"</span>, </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Diät 3"</span>, <span class="st">"Diät 4"</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet_name, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/alternative names-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="reihenfolge" class="level3" data-number="20.7.2">
<h3 data-number="20.7.2" class="anchored" data-anchor-id="reihenfolge"><span class="header-section-number">20.7.2</span> Reihenfolge</h3>
<p>Die Reihenfolge von Faktorstufen ist bei Wortketten standardmäßig alphabetisch und bei Zahlen aufsteigend. Wenn wir das ändern möchten, müssen wir die Sortierung des Faktors ändern (dadurch ändert sich <strong>nicht</strong> die Sortierung der Variablen im Datensatz).</p>
<p>Die Sortierung des Faktors können wir mit der Funktion <code>factor()</code> ändern. Dem Parameter <code>x</code> übergeben wir die Variable; <code>levels</code> einen character-Vektor mit der neuen Sortierung.</p>
<p>Wir ändern die Reihenfolge der Gruppen von <code>Diet</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kopie von `Diet` erstellen (optional):</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>ChickWeight<span class="sc">$</span>Diet_sort <span class="ot">&lt;-</span> ChickWeight<span class="sc">$</span>Diet </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Änderung der Reihenfolge:</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>ChickWeight<span class="sc">$</span>Diet_sort <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x=</span>ChickWeight<span class="sc">$</span>Diet_sort, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"unbearbeitet"</span>)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Diet_sort, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"bearbeitet"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-74-2.png" class="img-fluid figure-img" width="288"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen" class="level2 page-columns page-full" data-number="20.8">
<h2 data-number="20.8" class="anchored" data-anchor-id="grafiken-einzelner-gruppen-und-die-anpassung-von-achsengrenzen"><span class="header-section-number">20.8</span> Grafiken einzelner Gruppen und die Anpassung von Achsengrenzen</h2>
<p>Manchmal ist es sinnvoll, die Achsengrenzen von x- und y-manuell zu ändern, beispielsweise wenn wir Grafiken einzelner Gruppen vergleichen möchten.</p>
<p>Im Abschnitt zu <a href="#facetten-facet-grids">Facetten</a> haben wir gelernt, wie wir einzelne Grafiken für jede Ausprägung einer kategorialen Variablen (bzw. für jede Kombination von Ausprägungen mehrerer kategorialer Veriablen) erstellen können. Diese werden jedoch kleiner dargestellt, je mehr Gruppierungen es gibt. Wenn wir ohnehin nur spezifische Gruppen vergleich wollen, können wir für diese <strong>manuell Grafiken erstellen</strong>.</p>
<p>Wenn wir uns für die Gewichtszunahme (<code>weight</code>) in den Gruppen (<code>Diet</code>) zu Beginn (<code>Time 0</code>) und zum Ende (<code>Time 21</code>) des Experiments interessieren, dann können manuell beide Grafiken erstellen.</p>
<aside>
<a href="#index">Hier</a> wird das Indexieren der Daten erklärt.
</aside>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">0</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/different scale-1.png" class="img-fluid figure-img" width="315"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/different scale-2.png" class="img-fluid figure-img" width="315"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
<br>
<br>

</aside>
<p>Das <strong>Problem</strong> hierbei ist, dass sich die Streubreiten von <code>weight</code>, und damit die Achsengrenzen von y, zu beiden Zeitpunkten stark unterscheiden. Dadurch könnten wir einen falschen Eindruck von den Daten bekommen.</p>
<p>Um das zu verhindern, können wir die Achsengrenzen anpassen. Das machen wir mit <code>xlim()</code> und <code>ylim()</code>. Diesen übergeben wir jeweils einen numerischen Vektor, der den unteren und den oberen Grenzwert der Achse enthält.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">0</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">375</span>))</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">375</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/same scale-1.png" class="img-fluid figure-img" width="320"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/same scale-2.png" class="img-fluid figure-img" width="320"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
<br>
<br>

</aside>
<p>Bei genauer Betrachtung fällt weiterhin auf, dass unsere beiden <strong>y-Achsen nicht bei 0 beginnen</strong>, obwohl wir das mit <code>ylim(c(0,...))</code> scheinbar so festgelegt haben.</p>
<p>Standardmäßig werden Achsen (kontinuierlicher Variablen) etwas <em>erweitert</em>. Dieses Verhalten können wir z.B. mit <code>scale_y_continuous(expand = c(0, 0))</code> auf der y-Achse (und <code>scale_x_coninuous()</code> auf der x-Achse) ändern.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Etwaige Änderungen der Achsengrenzen müssen wir dann aber auch in <code>scale_y_continuous(limits)</code> machen.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">375</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="geraden-einzeichnen" class="level2 page-columns page-full" data-number="20.9">
<h2 data-number="20.9" class="anchored" data-anchor-id="geraden-einzeichnen"><span class="header-section-number">20.9</span> Geraden einzeichnen</h2>
<p>Wir können auch Geraden einzeichnen (z.B. alternativ zu Achsengrenzen oder um manuell Regressionsgeraden einzuzeichnen).</p>
<p><strong>Vertikale</strong> Gerade können wir mit <code>geom_vline(xintercept)</code> einfügen; <strong>horizontale</strong> mit <code>geom_hline(yintercept)</code>.</p>
<p>Dabei können wir den Parametern <code>xintercept</code> und <code>yintercept</code> auch mehrere Werte übergeben. Dazu packen wir diese in einen Vektor mit <code>c()</code>.</p>
<p>Wir schauen uns dazu eines der Beispiele aus dem Abschnitt vorher an: die Gewichtszunahme (<code>weight</code>) in den Gruppen (<code>Diet</code>) zum Ende (<code>Time 21</code>) des Experiments. Wir zeichnen jeweils den kleinsten und größten Wert, sowie den Mittelwert (über alle <code>Diet</code>-Gruppen) von <code>weight</code> als (horizontale) Gerade ein.</p>
<aside>
<a href="#index">Hier</a> wird das Indexieren der Daten erklärt.
</aside>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maxima von weight (zu Time 21) herausfinden:</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>min <span class="ot">&lt;-</span> <span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>max <span class="ot">&lt;-</span> <span class="fu">min</span>(ChickWeight<span class="sc">$</span>weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Min &amp; Max:</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">c</span>(min, max)) <span class="sc">+</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mittelwert:</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="fu">mean</span>(ChickWeight<span class="sc">$</span>weight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">21</span>]), <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="300"></p>
</figure>
</div>
</div>
</div>
<p>So können wir die Verteilungen von <code>weight</code> in den <code>Diet</code>-Gruppen zu den zwei Zeitpunkten besser vergleichen. Wir können nicht nur sehen, dass die Verteilung an Tag 21 wesentlich breiter gestreut ist als an Tag 0 (weil dadurch die Achsengrenzen angepasst werden), sondern auch …</p>
</section>
<section id="weitere-statistische-kennwerte-ergänzen" class="level2" data-number="20.10">
<h2 data-number="20.10" class="anchored" data-anchor-id="weitere-statistische-kennwerte-ergänzen"><span class="header-section-number">20.10</span> Weitere statistische Kennwerte ergänzen</h2>
<p>Manchmal möchten wir in einer bestehende Grafik noch zusätzliche statistische Kennwerte einfügen. Dazu können wir <code>stat_summary()</code> nutzen. Damit können wir verschiedenen Kennwerte <strong>von y</strong> (z.B. den Mittelwert, den Median, oder den minimalen und maximalen Wert) in eine Grafik einzeichnen.</p>
<p>Als Beispiel schauen wir uns ein Streudiagramm des Gewichts der Küken (<code>weight</code>) in Abhängigkeit ihrer Diät (<code>Diet</code>) am 10. Tag (<code>Time 10</code>) an.</p>
<p>Per Default wird mit <code>stat_summary()</code> (ohne Spezifikation von Argumenten) der Mittelwert (als Punkt), umschlossen vom Standardfehler des Mittelwerts (als Linie), eingezeichnet.</p>
<p>Wir können dem Parameter <code>fun</code> aber auch die Argumente <code>"median"</code> oder <code>"mean"</code> übergeben. Letzteres zeichnet ebenfalls den Mittelwert ein (aber ohne Standardfehler). Wenn wir die Extrema einfügen wollen, nutzen wir <code>fun.min = "min"</code> und <code>fun.max = "max"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">10</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">stat_summary</span>(<span class="at">col=</span><span class="st">"blue"</span>) <span class="sc">+</span> <span class="co"># Mittelwert + SE: blau</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"median"</span>, <span class="at">col=</span><span class="st">"red"</span>, <span class="at">pch=</span><span class="dv">3</span>) <span class="co"># Median: rotes Kreuz</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>No summary function supplied, defaulting to `mean_se()`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_segment()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/scatter plot with mean and modus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight[ChickWeight<span class="sc">$</span>Time <span class="sc">==</span> <span class="dv">10</span>,], <span class="fu">aes</span>(<span class="at">x=</span>Diet, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">fun.min =</span> <span class="st">"min"</span>, <span class="at">fun.max =</span> <span class="st">"max"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/only stat_summary-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mehr Informationen zur Funktion finden wir in der R-Dokumentation von <code>stat_summary()</code> bzw. eine ausführlichere Version davon mit Beispielabbildungen <a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" target="_blank">hier</a>.</p>
</section>
<section id="motive-themes" class="level2" data-number="20.11">
<h2 data-number="20.11" class="anchored" data-anchor-id="motive-themes"><span class="header-section-number">20.11</span> Motive (Themes)</h2>
<p>Es gibt einige Optionen, den Hintergrund des Koordinatensystems zu verändern.Standarmäßig haben wir einen grauen Hintergrund mit weißen Rasterlinien; das entspricht der Einstellung <code>theme_grey()</code>.</p>
<p>Wenn wir beispielsweise einen weißen Hintergrund mit grauen Rasterlinien haben möchten, nutzen wir dafür <code>theme_minimal()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>ChickWeight, <span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight)) <span class="sc">+</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir können unsere Palette möglicher Motiven mit dem Paket <strong>ggthemes</strong> erweitern. In diesem finden wir u.a. die Funktion <code>theme_tufte()</code>, mit der Grafiken nach dem Vorbild von Edward Tufte auf das Notwendige reduziert werden (z.B. weißer Hintergrund, keine unnötigen Rasterlinien eingezeichnet etc.).</p>
</section>
<section id="grafiken-exportieren" class="level2 page-columns page-full" data-number="20.12">
<h2 data-number="20.12" class="anchored" data-anchor-id="grafiken-exportieren"><span class="header-section-number">20.12</span> Grafiken exportieren</h2>
<p>Wenn wir unsere Grafik erstellt haben, müssen wir diese noch exportieren, um sie außerhalb von R nutzen zu können.</p>
<p>Grundsätzlich gibt es zwei Möglichkeiten dafür:</p>
<ul>
<li>über das untere rechte Panel bei <strong>Plots</strong> &gt; <strong>Export</strong> (nur in <strong>RStudio</strong> möglich)</li>
<li>mit Hilfe von <code>Funktionen</code></li>
</ul>
<p>Im Folgenden schauen wir uns an, wie wir den <strong>Export</strong>-Button und die Funktion <code>ggsave()</code>, mit der wir mit ggplot2 erstellte Grafiken exportieren können, nutzen.</p>
<p>Eine Übersicht über das Exportieren von Grafiken mit Funktionen aus dem Basispaket <strong>grDevices</strong>, finden wir <a href="http://www.cookbook-r.com/Graphs/Output_to_a_file/" target="_blank">hier</a>. Mit diesen Funktionen können wir Grafiken, die <strong>mit einem beliebigen R-Paket erstellt</strong> wurden, exportieren.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Wenn wir mehrere Garfiken exportieren wollen, müssen wir darauf achten, dass wir diesen <strong>unterschiedliche Namen</strong> zuweisen. Sowohl innerhalb von R als auch beim Export werden bestehende Objekte mit dem gleichen Namen überschrieben.</p>
</blockquote>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Hinweis für Windows-NutzerInnen: Manchmal kann es zu Probleme mit <strong>Aliasing</strong> kommen. Das ist, wenn Grafikelemente und/oder Text nach dem Export <strong>“krisselig”</strong> dargestellt werden.</p>
</blockquote>
<p><strong>Beispiel für Aliasing</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/Std_PNG.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<p>Bildquelle: https://www.r-bloggers.com/exporting-nice-plots-in-r/</p>
<p>Um das zu verhindern, können wir das Paket <strong>Cairo</strong>, mit dessen gleichnamiger Funktion, nutzen. Mehr Informationen zur Anwendung können wir auf <a href="https://www.r-bloggers.com/exporting-nice-plots-in-r/" target="_blank">R-bloggers</a> finden.</p>
<section id="export-button" class="level3 page-columns page-full" data-number="20.12.1">
<h3 data-number="20.12.1" class="anchored" data-anchor-id="export-button"><span class="header-section-number">20.12.1</span> <strong>Export-Button</strong></h3>
<p>Wenn wir die Grafik mittels der grafischen Benutzeroberfläche exportieren möchten, klicken wir auf <strong>Export</strong> im unteren rechten Panel. Wenn wir diese als Bild exportieren wollen, wählen wir <strong>Save as Image…</strong> aus.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/export 3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
Wenn wir mehrere Grafiken geplottet haben können wir mit den Pfeiltasten (ganz links unter dem Reiter Files) auswählen, welche Grafik wir exportieren wollen.
</aside>
<p>Daraufhin öffnet sich ein neues Fenster, in dem wir einige Einstellungen tätigen können.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/ggplot2/Bilder/export window.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="400"></p>
</figure>
</div>
</div>
</div>
<p><span style="color:#E63B7A"><strong>Bildformat</strong></span><br>
Hier können wir wählen, in welchem Bildformat wir unsere Grafik abspeichern wollen. Standardmäßig wird sie als PNG gespeichert. Weitere Optionen sind JPEG, TIFF, BMP, SVG und EPS.</p>
<p><span style="color:#AA7942"><strong>Verzeichnis</strong></span><br>
Wenn wir auf den Button <strong>Directory…</strong> klicken, können wir festlegen, wo die Grafik gespeichert werden soll. Standardmäßig wird sie in der obersten Ordnerstruktur, bzw. wenn wir ein Workind Directory gesetzt haben in diesem, gespeichert.</p>
<p><span style="color:#942192"><strong>Name der Datei</strong></span><br>
Hier können wir unserer Datei einen Namen geben. Standardmäßig wird als Name <em>Rplot</em> vorgeschlagen, wenn wir in dem aktuellen Verzeichnis keine andere Datei (im gleichen Format) besitzen, die den gleichen Namen trägt. Wenn es bereits eine solche Datei gibt, wird als Name für die neue Datei automatisch <em>Rplot01</em> (bzw. <em>Rplot02</em> usw.) vorgeschlagen.</p>
<p><span style="color:#669C35"><strong>Größe bearbeiten</strong></span><br>
Für die Bearbeitung der Größe der Grafik haben wir zwei Möglichkeiten:</p>
<ol type="1">
<li><strong>Angeben</strong> der Maße für Breite und Höhe</li>
<li><strong>Großziehen</strong> der Grafik</li>
</ol>
<p>Bei beiden Möglichkeiten können wir entweder willkürlich die Maße anpassen oder das Verhältnis zwischen Breite und Höhe beibehalten indem wir ein Häkchen bei <strong>Maintain aspect ratio</strong> setzen.</p>
<ol type="1">
<li>Hier geben wir jeweils die Maße für Breite und Höhe in px (<em>Pixel</em>) an. Wenn wir das Häkchen bei <strong>Maintain aspect ratio</strong> gesetzt haben, müssen wir nur ein Maß angeben; das andere wird automatisch berechnet. Danach können wir auf <strong>Update Preview</strong> klicken, um uns eine Vorschau der Grafik anzuschauen (aber das geht nur, solange die Maße nicht zu groß für die Vorschau sind).</li>
</ol>
<aside>
Die Standardmaße 398 x 375 px entsprechen 14,04 x 13,23 cm (B x H).
</aside>
<ol start="2" type="1">
<li>Analog können wir die Größe der Grafik auch mit der Maus verändern. Dazu ziehen wir einfach an der unteren rechten Ecke der Grafikvorschau.</li>
</ol>
<p>Wenn wir eine gewisse Größe in cm haben wollen, können wir die px-Angaben z.B. auf dieser <a href="https://www.blitzresults.com/de/pixel/" target="_blank">Seite</a> umrechnen lassen.</p>
<blockquote class="blockquote">
<p><em><strong>Achtung</strong></em>: Die Auflösung der Grafik können wir in dem Export-Fenster <strong><em>nicht</em></strong> ändern. Standardmäßig beträgt diese 72 dpi.</p>
</blockquote>
</section>
<section id="ggsave" class="level3 page-columns page-full" data-number="20.12.2">
<h3 data-number="20.12.2" class="anchored" data-anchor-id="ggsave"><span class="header-section-number">20.12.2</span> <code>ggsave()</code></h3>
<p>Mit ggplot2 erstellte Grafiken können wir mit <code>ggsave()</code> exportieren. Schauen wir uns einmal an, was wir in der Funktion spezifizieren können.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">"Grafik.png"</span>, <span class="co"># Name und Bildformat der zu exportierenden Grafik</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"/Users/..."</span>,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot =</span> <span class="fu">last_plot</span>(), <span class="co"># letzter Plot als Default oder alternativ Name der Grafik in R</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">12</span>, <span class="co"># Breite</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">9</span>, <span class="co"># Höhe</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">units =</span> <span class="st">"cm"</span>, <span class="co"># in welcher Einheit angegeben</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">dpi =</span> <span class="dv">72</span> <span class="co"># Default; äquivalent zu: dpi = "screen"</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Das gewünschte <span style="color:#E63B7A"><strong>Bildformat</strong></span> können wir einfach als Endung an den <span style="color:#942192"><strong>Namen der Grafik</strong></span> anhängen. Beides übergeben wir in <code>" "</code> an das Argument <code>filename</code>. Wir haben hier mehr Auswahl an möglichen Outputformaten. Es gibt z.B. PNG, PDF, JPEG, TIFF, EPS, PS, TEX und SVG.</p>
<p>Wir legen mit dem Argument <code>plot</code> fest, welche Grafik wird exportieren wollen. Das funktioniert nur wenn wir diese vorher in einer Variablen gespeichert haben (z.B. <code>name &lt;- ggplot(...)</code>). Dann erscheint der Name auch im Global Environment (oberer rechtes Panel in R). Standarmäßig wird der zuletzt erstellte Plot exportiert, wenn wir das Argument <code>plot</code> weglassen (oder <code>plot=last_plot()</code> eingeben).</p>
<p>Das <span style="color:#AA7942"><strong>Verzeichnis</strong></span>, in dem die Grafik abgelegt werden soll, können wir mit dem Argument <code>path</code> festlegen. Diesem übergeben wir den Ordnerpfad, welchen wir auch in <code>" "</code> setzen müssen. Standardmäßig wird die Grafik in der obersten Ordnersturktur bzw. im derzeitigen Working Directory (wenn eins gesetzt wurde) abgelegt.</p>
<p>Die <span style="color:#669C35"><strong>Größe</strong></span> der zu exportierenden Grafik können wir mit <code>width</code> und <code>height</code> ändern. Mit <code>units</code> legen wir dabei fest, in welcher Einheit die Maße sein sollen. Wenn wir <code>width</code>, <code>height</code> und <code>units</code> weglassen, wird die Größe des <em>current graphics device</em> genutzt. Diese ist von unseren jeweiligen globalen Computer-Einstellungen abhängig.</p>
<aside>
Manchmal müssen wir mit den Maßen ein bisschen herumspielen, bis wir die perfekte Größe gefunden haben.
</aside>
<p>Im Gegensatz zur Möglichkeiten des Exportierens via Export-Button können wir in <code>ggsave()</code> mit dem Argument <code>dpi</code> die <strong>Bildauflösung</strong> verändern. Zusäzlich zu der Standardeinstellung von 72 dpi (screen), können wir 300 dpi (print) und 320 dpi (retina) nutzen. Wir können sowohl die Zahl, als auch die Bezeichnung in <code>" "</code> angeben.</p>
</section>
</section>
<section id="weiterführende-hilfen" class="level2 page-columns page-full" data-number="20.13">
<h2 data-number="20.13" class="anchored" data-anchor-id="weiterführende-hilfen"><span class="header-section-number">20.13</span> Weiterführende Hilfen</h2>
<section id="eine-einfache-ggplot-funktion-qplot" class="level3 page-columns page-full" data-number="20.13.1">
<h3 data-number="20.13.1" class="anchored" data-anchor-id="eine-einfache-ggplot-funktion-qplot"><span class="header-section-number">20.13.1</span> Eine einfache ggplot-Funktion: <code>qplot()</code></h3>
<p>Es gibt im Paket <strong>ggplot2</strong> auch eine einfacher handzuhabende Variante zu <code>ggplot()</code> - das ist <code>qplot()</code> (“quick plot”). Diese ist an den Aufbau der base graphics Funktion <code>plot()</code> angelehnt. Mit ihr können wir verschiedenen Grafiken erstellen, aber sie ist weniger flexibel und modifizierbar als <code>ggplot()</code>.</p>
<p>Wir erstellen exemplarisch ein Streudiagramm vom Gewicht der Küken (<code>weight</code>) in Abhängigkeit der Zeit (<code>Time</code>) und ergänzen eine Überschrift sowie Achsenbeschriftungen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight, <span class="at">data=</span>ChickWeight, <span class="at">geom=</span><span class="st">"point"</span>, </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">main=</span><span class="st">"Gewichtsveränderung über die Zeit"</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab=</span><span class="st">"Zeit in Tagen"</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab=</span><span class="st">"Gewicht in Gramm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `qplot()` was deprecated in ggplot2 3.4.0.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Grafiken_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<aside>
<br>
<br>
<br>
Das gleiche Beispiel haben wir auch im Abschnitt <a href="#beschriftung">Beschriftung</a>.
</aside>
<p>Für mehr Informationen zu <code>qplot()</code> (vor allem zu den möglichen Argumenten) können wir <a href="https://www.statmethods.net/advgraphs/ggplot2.html" target="_blank">hier</a> nachschauen.</p>
</section>
<section id="mehrere-plots-zusammenführen" class="level3" data-number="20.13.2">
<h3 data-number="20.13.2" class="anchored" data-anchor-id="mehrere-plots-zusammenführen"><span class="header-section-number">20.13.2</span> Mehrere Plots zusammenführen</h3>
<p>Wenn wir mehrere Grafiken haben, die wir in einer gemeinsamen Datei speichern wollen, dann müssen wir dafür auf zusätzliche Pakete zurückgreifen. Diese <a href="https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html" target="_blank">Seite</a> gibt einen guten Überblick darüber, welche Funktionen wir dafür nutzen können. Am Ende der Seite unter <strong>Alternative options</strong> befindet sich eine kleine Tabelle, in der die Pakete mit ihren Funktionen hinsichtlich ihrer <code>ggsave()</code>-Kompatibilität und Möglichkeit zur Anordnung der Plots verglichen werden.</p>
<!--
## Weitere Lernplattformen

Im Internet finden wir zahlreiche Seiten, die uns die Erstellung von Grafiken in R erklären. Die meisten fokussieren dabei auf die Anwendung von ggplot. Im Folgenden eine Übersicht einiger ausgewählter Seiten.

* **<a href="http://www.cookbook-r.com/Graphs/" target="_blank">R Cookbook</a>**
    + Hier finden wir nicht nur eine Anleitung zur Erstellung von Grafiken mit Hilfe von ggplot. Es gibt u.a. zusätzlich Informationen zur Veränderung der **Linientypen** und **Schriftarten** in Grafiken. Zur Erstellung von **base R Grafiken** und **Korrelationsmatrizen** finden wir hier auch Hilfe.

* **<a href="https://r4ds.had.co.nz/data-visualisation.html" target="_blank">R for Data Science</a>**
   + Hadley Wickham, der Entwickler von ggplot, hat eine Seite erstellt, auf der wir den Umgang mit R lernen können. Hier finden wir eine grundlegende Einführung in die Funktion `ggplot()`. Zwischendrin gibt es hin und wieder Übungen (*Exercises*), die unser Verständnis testen.
   

* **<a href="https://psyr.org/visualising-data.html#151_r_graphics" target="_blank">R for Psychological Science</a>**
  + Hier finden wir Grafiken sortiert nach Arten und jeweils dazu spezifische Modifikationsoptionen.


* **<a href="https://luketudge.github.io/stats-tutorials/tutorials/Plotting.html#a_grammar_of_graphics" target="_blank">stats-tutorials</a>**
   + Diese Seite legt Wert darauf, euch die *grammar of graphics* näher zu bringen und euch ein generelles Verständnis für die Funktionsweise von ggplot zu vermitteln.

* Falls ihr eine Einführung für **base graphics** haben wollt, bietet sich beispielsweise diese <a href="https://www.stat.auckland.ac.nz/~ihaka/787/lectures-r-graphics.pdf" target="_blank">Seite</a> dafür an.
-->
<hr>
<p>Um eine möglichst exakte Replikation der Funktionen zu gewährleisten gibt es im folgenden relevante Angaben zum System (<strong>R-Version</strong>, <strong>Betriebssystem</strong>, <strong>geladene Pakete mit Angaben zur Version</strong>), mit welchem diese Seite erstellt wurde.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.3 (2024-02-29)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.3 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

time zone: Etc/UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggalluvial_0.12.5  ggiraphExtra_0.3.0 lsr_0.5.2          knitr_1.46        
[5] kableExtra_1.4.0   dplyr_1.1.4        ggplot2_3.5.1     

loaded via a namespace (and not attached):
 [1] gtable_0.3.5       mycor_0.1.1        xfun_0.43          htmlwidgets_1.6.4 
 [5] insight_0.19.10    lattice_0.22-6     vctrs_0.6.5        tools_4.3.3       
 [9] generics_0.1.3     tibble_3.2.1       fansi_1.0.6        highr_0.10        
[13] cluster_2.1.6      pkgconfig_2.0.3    Matrix_1.6-5       data.table_1.15.4 
[17] checkmate_2.3.1    RColorBrewer_1.1-3 uuid_1.2-0         lifecycle_1.0.4   
[21] compiler_4.3.3     farver_2.1.1       stringr_1.5.1      sjmisc_2.8.9      
[25] munsell_0.5.1      htmltools_0.5.8.1  yaml_2.3.8         htmlTable_2.4.2   
[29] Formula_1.2-5      tidyr_1.3.1        pillar_1.9.0       MASS_7.3-60.0.1   
[33] Hmisc_5.1-2        rpart_4.1.23       nlme_3.1-164       sjlabelled_1.2.0  
[37] tidyselect_1.2.1   digest_0.6.35      stringi_1.8.3      reshape2_1.4.4    
[41] purrr_1.0.2        labeling_0.4.3     splines_4.3.3      fastmap_1.1.1     
[45] grid_4.3.3         colorspace_2.1-0   cli_3.6.2          magrittr_2.0.3    
[49] base64enc_0.1-3    utf8_1.2.4         foreign_0.8-86     withr_3.0.0       
[53] scales_1.3.0       backports_1.4.1    rmarkdown_2.26     nnet_7.3-19       
[57] gridExtra_2.3      evaluate_0.23      viridisLite_0.4.2  mgcv_1.9-1        
[61] rlang_1.1.3        ggiraph_0.8.9      Rcpp_1.0.12        glue_1.7.0        
[65] ppcor_1.1          xml2_1.3.6         svglite_2.1.3      rstudioapi_0.16.0 
[69] jsonlite_1.8.8     R6_2.5.1           plyr_1.8.9         systemfonts_1.0.6 </code></pre>
</div>
</div>
<p>Für Informationen zur Interpretation dieses Outputs schaut auch den Abschnitt <a href="./Pakete.html#replizierbarkeit-von-analysen">Replizierbarkeit von Analysen</a> des Kapitels zu Paketen an.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Fehlende-Werte.html" class="pagination-link" aria-label="Fehlende Werte">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Fehlende Werte</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Fehlermeldungen.html" class="pagination-link" aria-label="Fehlermeldungen">
        <span class="nav-page-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Fehlermeldungen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/Methods-Berlin/RLernplattform/edit/main/Grafiken.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Methods-Berlin/RLernplattform/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>